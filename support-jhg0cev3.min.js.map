{"version":3,"sources":["src/support/check.js","node_modules/core-js/modules/_global.js","node_modules/core-js/modules/_core.js","node_modules/core-js/modules/_is-object.js","node_modules/core-js/modules/_an-object.js","node_modules/core-js/modules/_fails.js","node_modules/core-js/modules/_descriptors.js","node_modules/core-js/modules/_dom-create.js","node_modules/core-js/modules/_ie8-dom-define.js","node_modules/core-js/modules/_to-primitive.js","node_modules/core-js/modules/_object-dp.js","node_modules/core-js/modules/_property-desc.js","node_modules/core-js/modules/_hide.js","node_modules/core-js/modules/_has.js","node_modules/core-js/modules/_uid.js","node_modules/core-js/modules/_redefine.js","node_modules/core-js/modules/_a-function.js","node_modules/core-js/modules/_ctx.js","node_modules/core-js/modules/_export.js","node_modules/core-js/modules/_to-integer.js","node_modules/core-js/modules/_to-length.js","node_modules/core-js/modules/_cof.js","node_modules/core-js/modules/_shared.js","node_modules/core-js/modules/_wks.js","node_modules/core-js/modules/_is-regexp.js","node_modules/core-js/modules/_defined.js","node_modules/core-js/modules/_string-context.js","node_modules/core-js/modules/_fails-is-regexp.js","node_modules/core-js/modules/es6.string.starts-with.js","node_modules/core-js/modules/_to-index.js","node_modules/core-js/modules/es6.string.from-code-point.js","node_modules/core-js/modules/_to-object.js","node_modules/core-js/modules/_iter-call.js","node_modules/core-js/modules/_is-array-iter.js","node_modules/core-js/modules/_create-property.js","node_modules/core-js/modules/_classof.js","node_modules/core-js/modules/core.get-iterator-method.js","node_modules/core-js/modules/_iter-detect.js","node_modules/core-js/modules/es6.array.from.js","node_modules/core-js/modules/_library.js","node_modules/core-js/modules/_task.js","node_modules/core-js/modules/_an-instance.js","node_modules/core-js/modules/_for-of.js","node_modules/core-js/modules/_species-constructor.js","node_modules/core-js/modules/_invoke.js","node_modules/core-js/modules/_html.js","node_modules/core-js/modules/es6.promise.js","node_modules/core-js/modules/_microtask.js","node_modules/core-js/modules/_set-to-string-tag.js","node_modules/core-js/modules/_set-species.js","node_modules/core-js/modules/_redefine-all.js","node_modules/core-js/modules/_meta.js","node_modules/core-js/modules/_wks-ext.js","node_modules/core-js/modules/_wks-define.js","node_modules/core-js/modules/_iobject.js","node_modules/core-js/modules/_to-iobject.js","node_modules/core-js/modules/_shared-key.js","node_modules/core-js/modules/_object-keys-internal.js","node_modules/core-js/modules/_array-includes.js","node_modules/core-js/modules/_enum-bug-keys.js","node_modules/core-js/modules/_object-keys.js","node_modules/core-js/modules/_keyof.js","node_modules/core-js/modules/_object-gops.js","node_modules/core-js/modules/_object-pie.js","node_modules/core-js/modules/_enum-keys.js","node_modules/core-js/modules/_is-array.js","node_modules/core-js/modules/_object-dps.js","node_modules/core-js/modules/_object-create.js","node_modules/core-js/modules/_object-gopn.js","node_modules/core-js/modules/_object-gopn-ext.js","node_modules/core-js/modules/_object-gopd.js","node_modules/core-js/modules/es6.symbol.js","node_modules/regenerator-runtime/runtime.js","src/support/polyfill.js","src/lib/modifier.js","src/input.js","src/lib/prefixgen.js","src/lib/promises.js","src/lib/results.js","src/lib/provider.js","src/lib/valid.js","src/lib/event.js","src/page.js","src/adverts.js","src/polyfill.js","src/buttons.js","src/lib/worker.js","src/options.js","src/selection.js","src/sw.js"],"names":["window","location","search","indexOf","Map","WeakMap","global","module","Math","self","Function","__g","core","version","__e","it","isObject","TypeError","exec","e","require$$0","Object","defineProperty","get","a","document","is","createElement","require$$1","require$$2","S","fn","val","toString","call","valueOf","dP","O","P","Attributes","toPrimitive","IE8_DOM_DEFINE","value","bitmap","object","key","f","createDesc","hasOwnProperty","id","px","random","concat","undefined","SRC","$toString","TPL","split","inspectSource","safe","isFunction","has","hide","join","String","prototype","this","that","length","b","c","apply","arguments","$export","type","name","source","own","out","exp","IS_FORCED","F","IS_GLOBAL","G","IS_STATIC","IS_PROTO","IS_BIND","B","target","exports","expProto","ctx","redefine","U","W","R","ceil","floor","isNaN","min","toInteger","slice","store","Symbol","USE_SYMBOL","uid","MATCH","isRegExp","cof","searchString","NAME","defined","$startsWith","KEY","re","context","index","toLength","max","fromCharCode","$fromCodePoint","fromCodePoint","x","code","res","aLen","i","toIndex","RangeError","push","iterator","entries","anObject","ret","ITERATOR","ArrayProto","Array","Iterators","$defineProperty","TAG","ARG","tryGet","T","callee","getIteratorMethod","classof","SAFE_CLOSING","riter","from","skipClosing","arr","iter","next","done","arrayLike","result","step","toObject","C","mapfn","mapping","iterFn","getIterFn","isArrayIter","defer","channel","port","Constructor","forbiddenField","BREAK","RETURN","iterable","SPECIES","D","constructor","aFunction","args","un","documentElement","process","setTask","setImmediate","clearTask","clearImmediate","MessageChannel","counter","queue","run","listener","event","data","nextTick","port2","port1","onmessage","postMessage","addEventListener","importScripts","cel","appendChild","removeChild","Internal","GenericPromiseCapability","Wrapper","macrotask","set","Observer","MutationObserver","WebKitMutationObserver","Promise","isNode","def","tag","stat","configurable","task","microtask","head","last","notify","flush","parent","domain","exit","enter","toggle","node","createTextNode","observe","characterData","resolve","promise","then","$Promise","empty","USE_NATIVE","FakePromise","PromiseRejectionEvent","sameConstructor","isThenable","newPromiseCapability","PromiseCapability","reject","$$resolve","$$reject","perform","error","isReject","_n","chain","_c","_v","ok","_s","reaction","handler","fail","_h","onHandleUnhandled","onUnhandled","abrupt","console","isUnhandled","emit","onunhandledrejection","reason","_a","onrejectionhandled","$reject","_d","_w","$resolve","wrapper","executor","err","src","onFulfilled","onRejected","speciesConstructor","require$$4","DESCRIPTORS","require$$6","r","capability","require$$7","all","values","remaining","$index","alreadyCalled","META","setDesc","isExtensible","FREEZE","preventExtensions","setMeta","meta","create","w","NEED","propertyIsEnumerable","IObject","shared","arrayIndexOf","IS_INCLUDES","$this","el","fromIndex","toIObject","IE_PROTO","names","keys","$keys","enumBugKeys","getKeys","getOwnPropertySymbols","getSymbols","gOPS","symbols","isEnum","pIE","isArray","arg","defineProperties","Properties","Empty","createDict","iframeDocument","iframe","style","display","contentWindow","open","write","lt","close","dPs","hiddenKeys","getOwnPropertyNames","gOPN","windowNames","getWindowNames","gOPD","getOwnPropertyDescriptor","$GOPD","$DP","gOPNExt","$Symbol","$JSON","JSON","_stringify","stringify","HIDDEN","wks","TO_PRIMITIVE","SymbolRegistry","AllSymbols","OPSymbols","ObjectProto","QObject","setter","findChild","setSymbolDesc","$fails","_create","protoDesc","wrap","sym","_k","isSymbol","babelHelpers.typeof","enumerable","$defineProperties","enumKeys","l","$propertyIsEnumerable","E","$getOwnPropertyDescriptor","$getOwnPropertyNames","$getOwnPropertySymbols","IS_OP","$set","charAt","wksExt","keyOf","replacer","$replacer","require$$5","setToStringTag","innerFn","outerFn","tryLocsList","protoGenerator","Generator","generator","Context","_invoke","makeInvokeMethod","tryCatch","obj","GeneratorFunction","GeneratorFunctionPrototype","defineIteratorMethods","forEach","method","AsyncIterator","invoke","record","hasOwn","__await","unwrapped","bind","previousPromise","callInvokeWithMethodAndArg","state","GenStateSuspendedStart","GenStateExecuting","Error","GenStateCompleted","doneResult","delegate","delegateResult","maybeInvokeDelegate","ContinueSentinel","sent","_sent","dispatchException","GenStateSuspendedYield","return","info","resultName","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","reset","iteratorMethod","iteratorSymbol","Op","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","runtime","regeneratorRuntime","IteratorPrototype","getProto","getPrototypeOf","NativeIteratorPrototype","Gp","displayName","isGeneratorFunction","genFun","ctor","mark","setPrototypeOf","__proto__","awrap","async","reverse","pop","skipTempReset","prev","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","thrown","CustomEvent","params","bubbles","cancelable","detail","createEvent","initCustomEvent","Event","Element","parentNode","testEl","classList","contains","original","DOMTokenList","force","add","remove","fetch","isPointGender","p","isPersonGender","isFamilyMember","isVariationSelector","isDiversitySelector","isFlagPoint","unlikelyModifierBase","jsdecode","s","len","points","raw","charCodeAt","extra","splitEmoji","curr","point","suffix","check","modify","opt_op","stats","tone","gender","single","double","neutral","chars","some","char","first","genderable","family","ch","flip","genderFlip","isSinglePerson","basicDiversity","candidate","isSingle","nextGenderPoint","g","previousMaster","master","opt_point","opt_allowOtherFlip","n","m","map","allowOtherFlip","genderPoint","reduce","datasetSafeDelete","d","dataset","build","prefixLength","maxSuggestions","prefixSuggest","k","prefix","substr","part","opts","typed","rest","toLowerCase","filter","word","startsWith","idle","requestIdleCallback","rAF","delay","setTimeout","requestAnimationFrame","debounce","callable","debouceMap","delete","clearTimeout","t","removeDuplicates","row","found","Set","item","merge","existing","update","lookup","existingRow","updatedData","request","text","more","recent","unshift","localPromise","getPrefixGen","suggest","url","api","encodeURIComponent","morePromise","json","both","local","submit","emoji","body","FormData","append","mode","localStorage","valid","known","immediate","worker","arrowFromEvent","ev","arrowKeys","cleanupPrompt","refresh","active","adverts","querySelector","nextElementSibling","firstElementChild","warn","enqueue","timeout","callback","start","performance","now","cancelIdleCallback","navigator","sendBeacon","xhr","XMLHttpRequest","onerror","onload","send","buttons","querySelectorAll","trim","hasValue","Boolean","button","disabled","typer","input","defaultText","textContent","spaceRe","copy","selectionStart","selectionEnd","end","left","right","focus","execCommand","copied","click","getContext","font","measureText","cache","count","width","fixedWidthEmoji","platform","debugMode","emojiWidth","debug","invalidWidth","characterWidth","isExpectedLength","flags","total","expectedLength","clen","list","j","v","isWordCode","helper","className","insertBefore","underline","sizer","nonce","offsetLeft","readyState","renderLine","hidden","to","getElementById","transform","scrollLeft","setRange","initialLength","changeHandler","permitNextChange","dispatchEvent","isNotWordAfter","previousDetail","mergedEventHandler","events","selection","frame","dedup","clear","which","activeElement","scrollLeftOnBlur","keyCode","dedupRenderLine","passive","replaceFocus","previousScrollLeft","drift","where","modifier","choice","parse","Date","responseType","response","loader","remotePromise","promiseToReturn","select","pending","runner","splice","promises","Worker","fn_","queue_","waiting_","runner_","catch","_this","chunk_","shift","_this2","ls","ButtonManager","holder","holder_","pendingFirstEmoji_","options_","buttons_","buttonTarget_","setModifier","genderOption","optionType_","toneOption","createModifierButton","genders","tones","updateStatus","yes","owner","nextSibling","setAttribute","option","isValid","replaceChild","cand","checker","immediateResult","_this3","immediateFirstEmojiForOption_","results","options","previousActiveElement","_this4","optionForName_","addEmojiTo_","spaceFrame","chooser","localName","label","metaKey","ctrlKey","ga","arrow","eventlib","buttonArray","delta","previousRect","getBoundingClientRect","best","dist","Infinity","targetTop","candidateRect","top","abs","manager","previous","previousQueryAt","pendingFirstEmojiRequest","query","provider","pow","invalidLetterRe","simplifyWord","replace","firstEmojiForOption","advanced","form","namer","preventDefault","status","resize","height","innerHeight","minHeight","deferredPrompt","prompt","userChoice","serviceWorker","register","reload"],"mappings":"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","file":"support-jhg0cev3.min.js","sourcesContent":["\nif (!window.location.search || window.location.search.indexOf('ignore_check') === -1) {\n  const support = true && window.Map && window.WeakMap;\n  if (!support) {\n    window.location = 'error.html';\n  }\n}\n","// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nvar global = module.exports = typeof window != 'undefined' && window.Math == Math\n  ? window : typeof self != 'undefined' && self.Math == Math ? self : Function('return this')();\nif(typeof __g == 'number')__g = global; // eslint-disable-line no-undef","var core = module.exports = {version: '2.4.0'};\nif(typeof __e == 'number')__e = core; // eslint-disable-line no-undef","module.exports = function(it){\n  return typeof it === 'object' ? it !== null : typeof it === 'function';\n};","var isObject = require('./_is-object');\nmodule.exports = function(it){\n  if(!isObject(it))throw TypeError(it + ' is not an object!');\n  return it;\n};","module.exports = function(exec){\n  try {\n    return !!exec();\n  } catch(e){\n    return true;\n  }\n};","// Thank's IE8 for his funny defineProperty\nmodule.exports = !require('./_fails')(function(){\n  return Object.defineProperty({}, 'a', {get: function(){ return 7; }}).a != 7;\n});","var isObject = require('./_is-object')\n  , document = require('./_global').document\n  // in old IE typeof document.createElement is 'object'\n  , is = isObject(document) && isObject(document.createElement);\nmodule.exports = function(it){\n  return is ? document.createElement(it) : {};\n};","module.exports = !require('./_descriptors') && !require('./_fails')(function(){\n  return Object.defineProperty(require('./_dom-create')('div'), 'a', {get: function(){ return 7; }}).a != 7;\n});","// 7.1.1 ToPrimitive(input [, PreferredType])\nvar isObject = require('./_is-object');\n// instead of the ES6 spec version, we didn't implement @@toPrimitive case\n// and the second argument - flag - preferred type is a string\nmodule.exports = function(it, S){\n  if(!isObject(it))return it;\n  var fn, val;\n  if(S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it)))return val;\n  if(typeof (fn = it.valueOf) == 'function' && !isObject(val = fn.call(it)))return val;\n  if(!S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it)))return val;\n  throw TypeError(\"Can't convert object to primitive value\");\n};","var anObject       = require('./_an-object')\n  , IE8_DOM_DEFINE = require('./_ie8-dom-define')\n  , toPrimitive    = require('./_to-primitive')\n  , dP             = Object.defineProperty;\n\nexports.f = require('./_descriptors') ? Object.defineProperty : function defineProperty(O, P, Attributes){\n  anObject(O);\n  P = toPrimitive(P, true);\n  anObject(Attributes);\n  if(IE8_DOM_DEFINE)try {\n    return dP(O, P, Attributes);\n  } catch(e){ /* empty */ }\n  if('get' in Attributes || 'set' in Attributes)throw TypeError('Accessors not supported!');\n  if('value' in Attributes)O[P] = Attributes.value;\n  return O;\n};","module.exports = function(bitmap, value){\n  return {\n    enumerable  : !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable    : !(bitmap & 4),\n    value       : value\n  };\n};","var dP         = require('./_object-dp')\n  , createDesc = require('./_property-desc');\nmodule.exports = require('./_descriptors') ? function(object, key, value){\n  return dP.f(object, key, createDesc(1, value));\n} : function(object, key, value){\n  object[key] = value;\n  return object;\n};","var hasOwnProperty = {}.hasOwnProperty;\nmodule.exports = function(it, key){\n  return hasOwnProperty.call(it, key);\n};","var id = 0\n  , px = Math.random();\nmodule.exports = function(key){\n  return 'Symbol('.concat(key === undefined ? '' : key, ')_', (++id + px).toString(36));\n};","var global    = require('./_global')\n  , hide      = require('./_hide')\n  , has       = require('./_has')\n  , SRC       = require('./_uid')('src')\n  , TO_STRING = 'toString'\n  , $toString = Function[TO_STRING]\n  , TPL       = ('' + $toString).split(TO_STRING);\n\nrequire('./_core').inspectSource = function(it){\n  return $toString.call(it);\n};\n\n(module.exports = function(O, key, val, safe){\n  var isFunction = typeof val == 'function';\n  if(isFunction)has(val, 'name') || hide(val, 'name', key);\n  if(O[key] === val)return;\n  if(isFunction)has(val, SRC) || hide(val, SRC, O[key] ? '' + O[key] : TPL.join(String(key)));\n  if(O === global){\n    O[key] = val;\n  } else {\n    if(!safe){\n      delete O[key];\n      hide(O, key, val);\n    } else {\n      if(O[key])O[key] = val;\n      else hide(O, key, val);\n    }\n  }\n// add fake Function#toString for correct work wrapped methods / constructors with methods like LoDash isNative\n})(Function.prototype, TO_STRING, function toString(){\n  return typeof this == 'function' && this[SRC] || $toString.call(this);\n});","module.exports = function(it){\n  if(typeof it != 'function')throw TypeError(it + ' is not a function!');\n  return it;\n};","// optional / simple context binding\nvar aFunction = require('./_a-function');\nmodule.exports = function(fn, that, length){\n  aFunction(fn);\n  if(that === undefined)return fn;\n  switch(length){\n    case 1: return function(a){\n      return fn.call(that, a);\n    };\n    case 2: return function(a, b){\n      return fn.call(that, a, b);\n    };\n    case 3: return function(a, b, c){\n      return fn.call(that, a, b, c);\n    };\n  }\n  return function(/* ...args */){\n    return fn.apply(that, arguments);\n  };\n};","var global    = require('./_global')\n  , core      = require('./_core')\n  , hide      = require('./_hide')\n  , redefine  = require('./_redefine')\n  , ctx       = require('./_ctx')\n  , PROTOTYPE = 'prototype';\n\nvar $export = function(type, name, source){\n  var IS_FORCED = type & $export.F\n    , IS_GLOBAL = type & $export.G\n    , IS_STATIC = type & $export.S\n    , IS_PROTO  = type & $export.P\n    , IS_BIND   = type & $export.B\n    , target    = IS_GLOBAL ? global : IS_STATIC ? global[name] || (global[name] = {}) : (global[name] || {})[PROTOTYPE]\n    , exports   = IS_GLOBAL ? core : core[name] || (core[name] = {})\n    , expProto  = exports[PROTOTYPE] || (exports[PROTOTYPE] = {})\n    , key, own, out, exp;\n  if(IS_GLOBAL)source = name;\n  for(key in source){\n    // contains in native\n    own = !IS_FORCED && target && target[key] !== undefined;\n    // export native or passed\n    out = (own ? target : source)[key];\n    // bind timers to global for call from export context\n    exp = IS_BIND && own ? ctx(out, global) : IS_PROTO && typeof out == 'function' ? ctx(Function.call, out) : out;\n    // extend global\n    if(target)redefine(target, key, out, type & $export.U);\n    // export\n    if(exports[key] != out)hide(exports, key, exp);\n    if(IS_PROTO && expProto[key] != out)expProto[key] = out;\n  }\n};\nglobal.core = core;\n// type bitmap\n$export.F = 1;   // forced\n$export.G = 2;   // global\n$export.S = 4;   // static\n$export.P = 8;   // proto\n$export.B = 16;  // bind\n$export.W = 32;  // wrap\n$export.U = 64;  // safe\n$export.R = 128; // real proto method for `library` \nmodule.exports = $export;","// 7.1.4 ToInteger\nvar ceil  = Math.ceil\n  , floor = Math.floor;\nmodule.exports = function(it){\n  return isNaN(it = +it) ? 0 : (it > 0 ? floor : ceil)(it);\n};","// 7.1.15 ToLength\nvar toInteger = require('./_to-integer')\n  , min       = Math.min;\nmodule.exports = function(it){\n  return it > 0 ? min(toInteger(it), 0x1fffffffffffff) : 0; // pow(2, 53) - 1 == 9007199254740991\n};","var toString = {}.toString;\n\nmodule.exports = function(it){\n  return toString.call(it).slice(8, -1);\n};","var global = require('./_global')\n  , SHARED = '__core-js_shared__'\n  , store  = global[SHARED] || (global[SHARED] = {});\nmodule.exports = function(key){\n  return store[key] || (store[key] = {});\n};","var store      = require('./_shared')('wks')\n  , uid        = require('./_uid')\n  , Symbol     = require('./_global').Symbol\n  , USE_SYMBOL = typeof Symbol == 'function';\n\nvar $exports = module.exports = function(name){\n  return store[name] || (store[name] =\n    USE_SYMBOL && Symbol[name] || (USE_SYMBOL ? Symbol : uid)('Symbol.' + name));\n};\n\n$exports.store = store;","// 7.2.8 IsRegExp(argument)\nvar isObject = require('./_is-object')\n  , cof      = require('./_cof')\n  , MATCH    = require('./_wks')('match');\nmodule.exports = function(it){\n  var isRegExp;\n  return isObject(it) && ((isRegExp = it[MATCH]) !== undefined ? !!isRegExp : cof(it) == 'RegExp');\n};","// 7.2.1 RequireObjectCoercible(argument)\nmodule.exports = function(it){\n  if(it == undefined)throw TypeError(\"Can't call method on  \" + it);\n  return it;\n};","// helper for String#{startsWith, endsWith, includes}\nvar isRegExp = require('./_is-regexp')\n  , defined  = require('./_defined');\n\nmodule.exports = function(that, searchString, NAME){\n  if(isRegExp(searchString))throw TypeError('String#' + NAME + \" doesn't accept regex!\");\n  return String(defined(that));\n};","var MATCH = require('./_wks')('match');\nmodule.exports = function(KEY){\n  var re = /./;\n  try {\n    '/./'[KEY](re);\n  } catch(e){\n    try {\n      re[MATCH] = false;\n      return !'/./'[KEY](re);\n    } catch(f){ /* empty */ }\n  } return true;\n};","// 21.1.3.18 String.prototype.startsWith(searchString [, position ])\n'use strict';\nvar $export     = require('./_export')\n  , toLength    = require('./_to-length')\n  , context     = require('./_string-context')\n  , STARTS_WITH = 'startsWith'\n  , $startsWith = ''[STARTS_WITH];\n\n$export($export.P + $export.F * require('./_fails-is-regexp')(STARTS_WITH), 'String', {\n  startsWith: function startsWith(searchString /*, position = 0 */){\n    var that   = context(this, searchString, STARTS_WITH)\n      , index  = toLength(Math.min(arguments.length > 1 ? arguments[1] : undefined, that.length))\n      , search = String(searchString);\n    return $startsWith\n      ? $startsWith.call(that, search, index)\n      : that.slice(index, index + search.length) === search;\n  }\n});","var toInteger = require('./_to-integer')\n  , max       = Math.max\n  , min       = Math.min;\nmodule.exports = function(index, length){\n  index = toInteger(index);\n  return index < 0 ? max(index + length, 0) : min(index, length);\n};","var $export        = require('./_export')\n  , toIndex        = require('./_to-index')\n  , fromCharCode   = String.fromCharCode\n  , $fromCodePoint = String.fromCodePoint;\n\n// length should be 1, old FF problem\n$export($export.S + $export.F * (!!$fromCodePoint && $fromCodePoint.length != 1), 'String', {\n  // 21.1.2.2 String.fromCodePoint(...codePoints)\n  fromCodePoint: function fromCodePoint(x){ // eslint-disable-line no-unused-vars\n    var res  = []\n      , aLen = arguments.length\n      , i    = 0\n      , code;\n    while(aLen > i){\n      code = +arguments[i++];\n      if(toIndex(code, 0x10ffff) !== code)throw RangeError(code + ' is not a valid code point');\n      res.push(code < 0x10000\n        ? fromCharCode(code)\n        : fromCharCode(((code -= 0x10000) >> 10) + 0xd800, code % 0x400 + 0xdc00)\n      );\n    } return res.join('');\n  }\n});","// 7.1.13 ToObject(argument)\nvar defined = require('./_defined');\nmodule.exports = function(it){\n  return Object(defined(it));\n};","// call something on iterator step with safe closing on error\nvar anObject = require('./_an-object');\nmodule.exports = function(iterator, fn, value, entries){\n  try {\n    return entries ? fn(anObject(value)[0], value[1]) : fn(value);\n  // 7.4.6 IteratorClose(iterator, completion)\n  } catch(e){\n    var ret = iterator['return'];\n    if(ret !== undefined)anObject(ret.call(iterator));\n    throw e;\n  }\n};","// check on default Array iterator\nvar Iterators  = require('./_iterators')\n  , ITERATOR   = require('./_wks')('iterator')\n  , ArrayProto = Array.prototype;\n\nmodule.exports = function(it){\n  return it !== undefined && (Iterators.Array === it || ArrayProto[ITERATOR] === it);\n};","'use strict';\nvar $defineProperty = require('./_object-dp')\n  , createDesc      = require('./_property-desc');\n\nmodule.exports = function(object, index, value){\n  if(index in object)$defineProperty.f(object, index, createDesc(0, value));\n  else object[index] = value;\n};","// getting tag from 19.1.3.6 Object.prototype.toString()\nvar cof = require('./_cof')\n  , TAG = require('./_wks')('toStringTag')\n  // ES3 wrong here\n  , ARG = cof(function(){ return arguments; }()) == 'Arguments';\n\n// fallback for IE11 Script Access Denied error\nvar tryGet = function(it, key){\n  try {\n    return it[key];\n  } catch(e){ /* empty */ }\n};\n\nmodule.exports = function(it){\n  var O, T, B;\n  return it === undefined ? 'Undefined' : it === null ? 'Null'\n    // @@toStringTag case\n    : typeof (T = tryGet(O = Object(it), TAG)) == 'string' ? T\n    // builtinTag case\n    : ARG ? cof(O)\n    // ES3 arguments fallback\n    : (B = cof(O)) == 'Object' && typeof O.callee == 'function' ? 'Arguments' : B;\n};","var classof   = require('./_classof')\n  , ITERATOR  = require('./_wks')('iterator')\n  , Iterators = require('./_iterators');\nmodule.exports = require('./_core').getIteratorMethod = function(it){\n  if(it != undefined)return it[ITERATOR]\n    || it['@@iterator']\n    || Iterators[classof(it)];\n};","var ITERATOR     = require('./_wks')('iterator')\n  , SAFE_CLOSING = false;\n\ntry {\n  var riter = [7][ITERATOR]();\n  riter['return'] = function(){ SAFE_CLOSING = true; };\n  Array.from(riter, function(){ throw 2; });\n} catch(e){ /* empty */ }\n\nmodule.exports = function(exec, skipClosing){\n  if(!skipClosing && !SAFE_CLOSING)return false;\n  var safe = false;\n  try {\n    var arr  = [7]\n      , iter = arr[ITERATOR]();\n    iter.next = function(){ return {done: safe = true}; };\n    arr[ITERATOR] = function(){ return iter; };\n    exec(arr);\n  } catch(e){ /* empty */ }\n  return safe;\n};","'use strict';\nvar ctx            = require('./_ctx')\n  , $export        = require('./_export')\n  , toObject       = require('./_to-object')\n  , call           = require('./_iter-call')\n  , isArrayIter    = require('./_is-array-iter')\n  , toLength       = require('./_to-length')\n  , createProperty = require('./_create-property')\n  , getIterFn      = require('./core.get-iterator-method');\n\n$export($export.S + $export.F * !require('./_iter-detect')(function(iter){ Array.from(iter); }), 'Array', {\n  // 22.1.2.1 Array.from(arrayLike, mapfn = undefined, thisArg = undefined)\n  from: function from(arrayLike/*, mapfn = undefined, thisArg = undefined*/){\n    var O       = toObject(arrayLike)\n      , C       = typeof this == 'function' ? this : Array\n      , aLen    = arguments.length\n      , mapfn   = aLen > 1 ? arguments[1] : undefined\n      , mapping = mapfn !== undefined\n      , index   = 0\n      , iterFn  = getIterFn(O)\n      , length, result, step, iterator;\n    if(mapping)mapfn = ctx(mapfn, aLen > 2 ? arguments[2] : undefined, 2);\n    // if object isn't iterable or it's array with default iterator - use simple case\n    if(iterFn != undefined && !(C == Array && isArrayIter(iterFn))){\n      for(iterator = iterFn.call(O), result = new C; !(step = iterator.next()).done; index++){\n        createProperty(result, index, mapping ? call(iterator, mapfn, [step.value, index], true) : step.value);\n      }\n    } else {\n      length = toLength(O.length);\n      for(result = new C(length); length > index; index++){\n        createProperty(result, index, mapping ? mapfn(O[index], index) : O[index]);\n      }\n    }\n    result.length = index;\n    return result;\n  }\n});\n","module.exports = false;","var ctx                = require('./_ctx')\n  , invoke             = require('./_invoke')\n  , html               = require('./_html')\n  , cel                = require('./_dom-create')\n  , global             = require('./_global')\n  , process            = global.process\n  , setTask            = global.setImmediate\n  , clearTask          = global.clearImmediate\n  , MessageChannel     = global.MessageChannel\n  , counter            = 0\n  , queue              = {}\n  , ONREADYSTATECHANGE = 'onreadystatechange'\n  , defer, channel, port;\nvar run = function(){\n  var id = +this;\n  if(queue.hasOwnProperty(id)){\n    var fn = queue[id];\n    delete queue[id];\n    fn();\n  }\n};\nvar listener = function(event){\n  run.call(event.data);\n};\n// Node.js 0.9+ & IE10+ has setImmediate, otherwise:\nif(!setTask || !clearTask){\n  setTask = function setImmediate(fn){\n    var args = [], i = 1;\n    while(arguments.length > i)args.push(arguments[i++]);\n    queue[++counter] = function(){\n      invoke(typeof fn == 'function' ? fn : Function(fn), args);\n    };\n    defer(counter);\n    return counter;\n  };\n  clearTask = function clearImmediate(id){\n    delete queue[id];\n  };\n  // Node.js 0.8-\n  if(require('./_cof')(process) == 'process'){\n    defer = function(id){\n      process.nextTick(ctx(run, id, 1));\n    };\n  // Browsers with MessageChannel, includes WebWorkers\n  } else if(MessageChannel){\n    channel = new MessageChannel;\n    port    = channel.port2;\n    channel.port1.onmessage = listener;\n    defer = ctx(port.postMessage, port, 1);\n  // Browsers with postMessage, skip WebWorkers\n  // IE8 has postMessage, but it's sync & typeof its postMessage is 'object'\n  } else if(global.addEventListener && typeof postMessage == 'function' && !global.importScripts){\n    defer = function(id){\n      global.postMessage(id + '', '*');\n    };\n    global.addEventListener('message', listener, false);\n  // IE8-\n  } else if(ONREADYSTATECHANGE in cel('script')){\n    defer = function(id){\n      html.appendChild(cel('script'))[ONREADYSTATECHANGE] = function(){\n        html.removeChild(this);\n        run.call(id);\n      };\n    };\n  // Rest old browsers\n  } else {\n    defer = function(id){\n      setTimeout(ctx(run, id, 1), 0);\n    };\n  }\n}\nmodule.exports = {\n  set:   setTask,\n  clear: clearTask\n};","module.exports = function(it, Constructor, name, forbiddenField){\n  if(!(it instanceof Constructor) || (forbiddenField !== undefined && forbiddenField in it)){\n    throw TypeError(name + ': incorrect invocation!');\n  } return it;\n};","var ctx         = require('./_ctx')\n  , call        = require('./_iter-call')\n  , isArrayIter = require('./_is-array-iter')\n  , anObject    = require('./_an-object')\n  , toLength    = require('./_to-length')\n  , getIterFn   = require('./core.get-iterator-method')\n  , BREAK       = {}\n  , RETURN      = {};\nvar exports = module.exports = function(iterable, entries, fn, that, ITERATOR){\n  var iterFn = ITERATOR ? function(){ return iterable; } : getIterFn(iterable)\n    , f      = ctx(fn, that, entries ? 2 : 1)\n    , index  = 0\n    , length, step, iterator, result;\n  if(typeof iterFn != 'function')throw TypeError(iterable + ' is not iterable!');\n  // fast case for arrays with default iterator\n  if(isArrayIter(iterFn))for(length = toLength(iterable.length); length > index; index++){\n    result = entries ? f(anObject(step = iterable[index])[0], step[1]) : f(iterable[index]);\n    if(result === BREAK || result === RETURN)return result;\n  } else for(iterator = iterFn.call(iterable); !(step = iterator.next()).done; ){\n    result = call(iterator, f, step.value, entries);\n    if(result === BREAK || result === RETURN)return result;\n  }\n};\nexports.BREAK  = BREAK;\nexports.RETURN = RETURN;","// 7.3.20 SpeciesConstructor(O, defaultConstructor)\nvar anObject  = require('./_an-object')\n  , aFunction = require('./_a-function')\n  , SPECIES   = require('./_wks')('species');\nmodule.exports = function(O, D){\n  var C = anObject(O).constructor, S;\n  return C === undefined || (S = anObject(C)[SPECIES]) == undefined ? D : aFunction(S);\n};","// fast apply, http://jsperf.lnkit.com/fast-apply/5\nmodule.exports = function(fn, args, that){\n  var un = that === undefined;\n  switch(args.length){\n    case 0: return un ? fn()\n                      : fn.call(that);\n    case 1: return un ? fn(args[0])\n                      : fn.call(that, args[0]);\n    case 2: return un ? fn(args[0], args[1])\n                      : fn.call(that, args[0], args[1]);\n    case 3: return un ? fn(args[0], args[1], args[2])\n                      : fn.call(that, args[0], args[1], args[2]);\n    case 4: return un ? fn(args[0], args[1], args[2], args[3])\n                      : fn.call(that, args[0], args[1], args[2], args[3]);\n  } return              fn.apply(that, args);\n};","module.exports = require('./_global').document && document.documentElement;","'use strict';\nvar LIBRARY            = require('./_library')\n  , global             = require('./_global')\n  , ctx                = require('./_ctx')\n  , classof            = require('./_classof')\n  , $export            = require('./_export')\n  , isObject           = require('./_is-object')\n  , aFunction          = require('./_a-function')\n  , anInstance         = require('./_an-instance')\n  , forOf              = require('./_for-of')\n  , speciesConstructor = require('./_species-constructor')\n  , task               = require('./_task').set\n  , microtask          = require('./_microtask')()\n  , PROMISE            = 'Promise'\n  , TypeError          = global.TypeError\n  , process            = global.process\n  , $Promise           = global[PROMISE]\n  , process            = global.process\n  , isNode             = classof(process) == 'process'\n  , empty              = function(){ /* empty */ }\n  , Internal, GenericPromiseCapability, Wrapper;\n\nvar USE_NATIVE = !!function(){\n  try {\n    // correct subclassing with @@species support\n    var promise     = $Promise.resolve(1)\n      , FakePromise = (promise.constructor = {})[require('./_wks')('species')] = function(exec){ exec(empty, empty); };\n    // unhandled rejections tracking support, NodeJS Promise without it fails @@species test\n    return (isNode || typeof PromiseRejectionEvent == 'function') && promise.then(empty) instanceof FakePromise;\n  } catch(e){ /* empty */ }\n}();\n\n// helpers\nvar sameConstructor = function(a, b){\n  // with library wrapper special case\n  return a === b || a === $Promise && b === Wrapper;\n};\nvar isThenable = function(it){\n  var then;\n  return isObject(it) && typeof (then = it.then) == 'function' ? then : false;\n};\nvar newPromiseCapability = function(C){\n  return sameConstructor($Promise, C)\n    ? new PromiseCapability(C)\n    : new GenericPromiseCapability(C);\n};\nvar PromiseCapability = GenericPromiseCapability = function(C){\n  var resolve, reject;\n  this.promise = new C(function($$resolve, $$reject){\n    if(resolve !== undefined || reject !== undefined)throw TypeError('Bad Promise constructor');\n    resolve = $$resolve;\n    reject  = $$reject;\n  });\n  this.resolve = aFunction(resolve);\n  this.reject  = aFunction(reject);\n};\nvar perform = function(exec){\n  try {\n    exec();\n  } catch(e){\n    return {error: e};\n  }\n};\nvar notify = function(promise, isReject){\n  if(promise._n)return;\n  promise._n = true;\n  var chain = promise._c;\n  microtask(function(){\n    var value = promise._v\n      , ok    = promise._s == 1\n      , i     = 0;\n    var run = function(reaction){\n      var handler = ok ? reaction.ok : reaction.fail\n        , resolve = reaction.resolve\n        , reject  = reaction.reject\n        , domain  = reaction.domain\n        , result, then;\n      try {\n        if(handler){\n          if(!ok){\n            if(promise._h == 2)onHandleUnhandled(promise);\n            promise._h = 1;\n          }\n          if(handler === true)result = value;\n          else {\n            if(domain)domain.enter();\n            result = handler(value);\n            if(domain)domain.exit();\n          }\n          if(result === reaction.promise){\n            reject(TypeError('Promise-chain cycle'));\n          } else if(then = isThenable(result)){\n            then.call(result, resolve, reject);\n          } else resolve(result);\n        } else reject(value);\n      } catch(e){\n        reject(e);\n      }\n    };\n    while(chain.length > i)run(chain[i++]); // variable length - can't use forEach\n    promise._c = [];\n    promise._n = false;\n    if(isReject && !promise._h)onUnhandled(promise);\n  });\n};\nvar onUnhandled = function(promise){\n  task.call(global, function(){\n    var value = promise._v\n      , abrupt, handler, console;\n    if(isUnhandled(promise)){\n      abrupt = perform(function(){\n        if(isNode){\n          process.emit('unhandledRejection', value, promise);\n        } else if(handler = global.onunhandledrejection){\n          handler({promise: promise, reason: value});\n        } else if((console = global.console) && console.error){\n          console.error('Unhandled promise rejection', value);\n        }\n      });\n      // Browsers should not trigger `rejectionHandled` event if it was handled here, NodeJS - should\n      promise._h = isNode || isUnhandled(promise) ? 2 : 1;\n    } promise._a = undefined;\n    if(abrupt)throw abrupt.error;\n  });\n};\nvar isUnhandled = function(promise){\n  if(promise._h == 1)return false;\n  var chain = promise._a || promise._c\n    , i     = 0\n    , reaction;\n  while(chain.length > i){\n    reaction = chain[i++];\n    if(reaction.fail || !isUnhandled(reaction.promise))return false;\n  } return true;\n};\nvar onHandleUnhandled = function(promise){\n  task.call(global, function(){\n    var handler;\n    if(isNode){\n      process.emit('rejectionHandled', promise);\n    } else if(handler = global.onrejectionhandled){\n      handler({promise: promise, reason: promise._v});\n    }\n  });\n};\nvar $reject = function(value){\n  var promise = this;\n  if(promise._d)return;\n  promise._d = true;\n  promise = promise._w || promise; // unwrap\n  promise._v = value;\n  promise._s = 2;\n  if(!promise._a)promise._a = promise._c.slice();\n  notify(promise, true);\n};\nvar $resolve = function(value){\n  var promise = this\n    , then;\n  if(promise._d)return;\n  promise._d = true;\n  promise = promise._w || promise; // unwrap\n  try {\n    if(promise === value)throw TypeError(\"Promise can't be resolved itself\");\n    if(then = isThenable(value)){\n      microtask(function(){\n        var wrapper = {_w: promise, _d: false}; // wrap\n        try {\n          then.call(value, ctx($resolve, wrapper, 1), ctx($reject, wrapper, 1));\n        } catch(e){\n          $reject.call(wrapper, e);\n        }\n      });\n    } else {\n      promise._v = value;\n      promise._s = 1;\n      notify(promise, false);\n    }\n  } catch(e){\n    $reject.call({_w: promise, _d: false}, e); // wrap\n  }\n};\n\n// constructor polyfill\nif(!USE_NATIVE){\n  // 25.4.3.1 Promise(executor)\n  $Promise = function Promise(executor){\n    anInstance(this, $Promise, PROMISE, '_h');\n    aFunction(executor);\n    Internal.call(this);\n    try {\n      executor(ctx($resolve, this, 1), ctx($reject, this, 1));\n    } catch(err){\n      $reject.call(this, err);\n    }\n  };\n  Internal = function Promise(executor){\n    this._c = [];             // <- awaiting reactions\n    this._a = undefined;      // <- checked in isUnhandled reactions\n    this._s = 0;              // <- state\n    this._d = false;          // <- done\n    this._v = undefined;      // <- value\n    this._h = 0;              // <- rejection state, 0 - default, 1 - handled, 2 - unhandled\n    this._n = false;          // <- notify\n  };\n  Internal.prototype = require('./_redefine-all')($Promise.prototype, {\n    // 25.4.5.3 Promise.prototype.then(onFulfilled, onRejected)\n    then: function then(onFulfilled, onRejected){\n      var reaction    = newPromiseCapability(speciesConstructor(this, $Promise));\n      reaction.ok     = typeof onFulfilled == 'function' ? onFulfilled : true;\n      reaction.fail   = typeof onRejected == 'function' && onRejected;\n      reaction.domain = isNode ? process.domain : undefined;\n      this._c.push(reaction);\n      if(this._a)this._a.push(reaction);\n      if(this._s)notify(this, false);\n      return reaction.promise;\n    },\n    // 25.4.5.1 Promise.prototype.catch(onRejected)\n    'catch': function(onRejected){\n      return this.then(undefined, onRejected);\n    }\n  });\n  PromiseCapability = function(){\n    var promise  = new Internal;\n    this.promise = promise;\n    this.resolve = ctx($resolve, promise, 1);\n    this.reject  = ctx($reject, promise, 1);\n  };\n}\n\n$export($export.G + $export.W + $export.F * !USE_NATIVE, {Promise: $Promise});\nrequire('./_set-to-string-tag')($Promise, PROMISE);\nrequire('./_set-species')(PROMISE);\nWrapper = require('./_core')[PROMISE];\n\n// statics\n$export($export.S + $export.F * !USE_NATIVE, PROMISE, {\n  // 25.4.4.5 Promise.reject(r)\n  reject: function reject(r){\n    var capability = newPromiseCapability(this)\n      , $$reject   = capability.reject;\n    $$reject(r);\n    return capability.promise;\n  }\n});\n$export($export.S + $export.F * (LIBRARY || !USE_NATIVE), PROMISE, {\n  // 25.4.4.6 Promise.resolve(x)\n  resolve: function resolve(x){\n    // instanceof instead of internal slot check because we should fix it without replacement native Promise core\n    if(x instanceof $Promise && sameConstructor(x.constructor, this))return x;\n    var capability = newPromiseCapability(this)\n      , $$resolve  = capability.resolve;\n    $$resolve(x);\n    return capability.promise;\n  }\n});\n$export($export.S + $export.F * !(USE_NATIVE && require('./_iter-detect')(function(iter){\n  $Promise.all(iter)['catch'](empty);\n})), PROMISE, {\n  // 25.4.4.1 Promise.all(iterable)\n  all: function all(iterable){\n    var C          = this\n      , capability = newPromiseCapability(C)\n      , resolve    = capability.resolve\n      , reject     = capability.reject;\n    var abrupt = perform(function(){\n      var values    = []\n        , index     = 0\n        , remaining = 1;\n      forOf(iterable, false, function(promise){\n        var $index        = index++\n          , alreadyCalled = false;\n        values.push(undefined);\n        remaining++;\n        C.resolve(promise).then(function(value){\n          if(alreadyCalled)return;\n          alreadyCalled  = true;\n          values[$index] = value;\n          --remaining || resolve(values);\n        }, reject);\n      });\n      --remaining || resolve(values);\n    });\n    if(abrupt)reject(abrupt.error);\n    return capability.promise;\n  },\n  // 25.4.4.4 Promise.race(iterable)\n  race: function race(iterable){\n    var C          = this\n      , capability = newPromiseCapability(C)\n      , reject     = capability.reject;\n    var abrupt = perform(function(){\n      forOf(iterable, false, function(promise){\n        C.resolve(promise).then(capability.resolve, reject);\n      });\n    });\n    if(abrupt)reject(abrupt.error);\n    return capability.promise;\n  }\n});","var global    = require('./_global')\n  , macrotask = require('./_task').set\n  , Observer  = global.MutationObserver || global.WebKitMutationObserver\n  , process   = global.process\n  , Promise   = global.Promise\n  , isNode    = require('./_cof')(process) == 'process';\n\nmodule.exports = function(){\n  var head, last, notify;\n\n  var flush = function(){\n    var parent, fn;\n    if(isNode && (parent = process.domain))parent.exit();\n    while(head){\n      fn   = head.fn;\n      head = head.next;\n      try {\n        fn();\n      } catch(e){\n        if(head)notify();\n        else last = undefined;\n        throw e;\n      }\n    } last = undefined;\n    if(parent)parent.enter();\n  };\n\n  // Node.js\n  if(isNode){\n    notify = function(){\n      process.nextTick(flush);\n    };\n  // browsers with MutationObserver\n  } else if(Observer){\n    var toggle = true\n      , node   = document.createTextNode('');\n    new Observer(flush).observe(node, {characterData: true}); // eslint-disable-line no-new\n    notify = function(){\n      node.data = toggle = !toggle;\n    };\n  // environments with maybe non-completely correct, but existent Promise\n  } else if(Promise && Promise.resolve){\n    var promise = Promise.resolve();\n    notify = function(){\n      promise.then(flush);\n    };\n  // for other environments - macrotask based on:\n  // - setImmediate\n  // - MessageChannel\n  // - window.postMessag\n  // - onreadystatechange\n  // - setTimeout\n  } else {\n    notify = function(){\n      // strange IE + webpack dev server bug - use .call(global)\n      macrotask.call(global, flush);\n    };\n  }\n\n  return function(fn){\n    var task = {fn: fn, next: undefined};\n    if(last)last.next = task;\n    if(!head){\n      head = task;\n      notify();\n    } last = task;\n  };\n};","var def = require('./_object-dp').f\n  , has = require('./_has')\n  , TAG = require('./_wks')('toStringTag');\n\nmodule.exports = function(it, tag, stat){\n  if(it && !has(it = stat ? it : it.prototype, TAG))def(it, TAG, {configurable: true, value: tag});\n};","'use strict';\nvar global      = require('./_global')\n  , dP          = require('./_object-dp')\n  , DESCRIPTORS = require('./_descriptors')\n  , SPECIES     = require('./_wks')('species');\n\nmodule.exports = function(KEY){\n  var C = global[KEY];\n  if(DESCRIPTORS && C && !C[SPECIES])dP.f(C, SPECIES, {\n    configurable: true,\n    get: function(){ return this; }\n  });\n};","var redefine = require('./_redefine');\nmodule.exports = function(target, src, safe){\n  for(var key in src)redefine(target, key, src[key], safe);\n  return target;\n};","var META     = require('./_uid')('meta')\n  , isObject = require('./_is-object')\n  , has      = require('./_has')\n  , setDesc  = require('./_object-dp').f\n  , id       = 0;\nvar isExtensible = Object.isExtensible || function(){\n  return true;\n};\nvar FREEZE = !require('./_fails')(function(){\n  return isExtensible(Object.preventExtensions({}));\n});\nvar setMeta = function(it){\n  setDesc(it, META, {value: {\n    i: 'O' + ++id, // object ID\n    w: {}          // weak collections IDs\n  }});\n};\nvar fastKey = function(it, create){\n  // return primitive with prefix\n  if(!isObject(it))return typeof it == 'symbol' ? it : (typeof it == 'string' ? 'S' : 'P') + it;\n  if(!has(it, META)){\n    // can't set metadata to uncaught frozen object\n    if(!isExtensible(it))return 'F';\n    // not necessary to add metadata\n    if(!create)return 'E';\n    // add missing metadata\n    setMeta(it);\n  // return object ID\n  } return it[META].i;\n};\nvar getWeak = function(it, create){\n  if(!has(it, META)){\n    // can't set metadata to uncaught frozen object\n    if(!isExtensible(it))return true;\n    // not necessary to add metadata\n    if(!create)return false;\n    // add missing metadata\n    setMeta(it);\n  // return hash weak collections IDs\n  } return it[META].w;\n};\n// add metadata on freeze-family methods calling\nvar onFreeze = function(it){\n  if(FREEZE && meta.NEED && isExtensible(it) && !has(it, META))setMeta(it);\n  return it;\n};\nvar meta = module.exports = {\n  KEY:      META,\n  NEED:     false,\n  fastKey:  fastKey,\n  getWeak:  getWeak,\n  onFreeze: onFreeze\n};","exports.f = require('./_wks');","var global         = require('./_global')\n  , core           = require('./_core')\n  , LIBRARY        = require('./_library')\n  , wksExt         = require('./_wks-ext')\n  , defineProperty = require('./_object-dp').f;\nmodule.exports = function(name){\n  var $Symbol = core.Symbol || (core.Symbol = LIBRARY ? {} : global.Symbol || {});\n  if(name.charAt(0) != '_' && !(name in $Symbol))defineProperty($Symbol, name, {value: wksExt.f(name)});\n};","// fallback for non-array-like ES3 and non-enumerable old V8 strings\nvar cof = require('./_cof');\nmodule.exports = Object('z').propertyIsEnumerable(0) ? Object : function(it){\n  return cof(it) == 'String' ? it.split('') : Object(it);\n};","// to indexed object, toObject with fallback for non-array-like ES3 strings\nvar IObject = require('./_iobject')\n  , defined = require('./_defined');\nmodule.exports = function(it){\n  return IObject(defined(it));\n};","var shared = require('./_shared')('keys')\n  , uid    = require('./_uid');\nmodule.exports = function(key){\n  return shared[key] || (shared[key] = uid(key));\n};","var has          = require('./_has')\n  , toIObject    = require('./_to-iobject')\n  , arrayIndexOf = require('./_array-includes')(false)\n  , IE_PROTO     = require('./_shared-key')('IE_PROTO');\n\nmodule.exports = function(object, names){\n  var O      = toIObject(object)\n    , i      = 0\n    , result = []\n    , key;\n  for(key in O)if(key != IE_PROTO)has(O, key) && result.push(key);\n  // Don't enum bug & hidden keys\n  while(names.length > i)if(has(O, key = names[i++])){\n    ~arrayIndexOf(result, key) || result.push(key);\n  }\n  return result;\n};","// false -> Array#indexOf\n// true  -> Array#includes\nvar toIObject = require('./_to-iobject')\n  , toLength  = require('./_to-length')\n  , toIndex   = require('./_to-index');\nmodule.exports = function(IS_INCLUDES){\n  return function($this, el, fromIndex){\n    var O      = toIObject($this)\n      , length = toLength(O.length)\n      , index  = toIndex(fromIndex, length)\n      , value;\n    // Array#includes uses SameValueZero equality algorithm\n    if(IS_INCLUDES && el != el)while(length > index){\n      value = O[index++];\n      if(value != value)return true;\n    // Array#toIndex ignores holes, Array#includes - not\n    } else for(;length > index; index++)if(IS_INCLUDES || index in O){\n      if(O[index] === el)return IS_INCLUDES || index || 0;\n    } return !IS_INCLUDES && -1;\n  };\n};","// IE 8- don't enum bug keys\nmodule.exports = (\n  'constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf'\n).split(',');","// 19.1.2.14 / 15.2.3.14 Object.keys(O)\nvar $keys       = require('./_object-keys-internal')\n  , enumBugKeys = require('./_enum-bug-keys');\n\nmodule.exports = Object.keys || function keys(O){\n  return $keys(O, enumBugKeys);\n};","var getKeys   = require('./_object-keys')\n  , toIObject = require('./_to-iobject');\nmodule.exports = function(object, el){\n  var O      = toIObject(object)\n    , keys   = getKeys(O)\n    , length = keys.length\n    , index  = 0\n    , key;\n  while(length > index)if(O[key = keys[index++]] === el)return key;\n};","exports.f = Object.getOwnPropertySymbols;","exports.f = {}.propertyIsEnumerable;","// all enumerable object keys, includes symbols\nvar getKeys = require('./_object-keys')\n  , gOPS    = require('./_object-gops')\n  , pIE     = require('./_object-pie');\nmodule.exports = function(it){\n  var result     = getKeys(it)\n    , getSymbols = gOPS.f;\n  if(getSymbols){\n    var symbols = getSymbols(it)\n      , isEnum  = pIE.f\n      , i       = 0\n      , key;\n    while(symbols.length > i)if(isEnum.call(it, key = symbols[i++]))result.push(key);\n  } return result;\n};","// 7.2.2 IsArray(argument)\nvar cof = require('./_cof');\nmodule.exports = Array.isArray || function isArray(arg){\n  return cof(arg) == 'Array';\n};","var dP       = require('./_object-dp')\n  , anObject = require('./_an-object')\n  , getKeys  = require('./_object-keys');\n\nmodule.exports = require('./_descriptors') ? Object.defineProperties : function defineProperties(O, Properties){\n  anObject(O);\n  var keys   = getKeys(Properties)\n    , length = keys.length\n    , i = 0\n    , P;\n  while(length > i)dP.f(O, P = keys[i++], Properties[P]);\n  return O;\n};","// 19.1.2.2 / 15.2.3.5 Object.create(O [, Properties])\nvar anObject    = require('./_an-object')\n  , dPs         = require('./_object-dps')\n  , enumBugKeys = require('./_enum-bug-keys')\n  , IE_PROTO    = require('./_shared-key')('IE_PROTO')\n  , Empty       = function(){ /* empty */ }\n  , PROTOTYPE   = 'prototype';\n\n// Create object with fake `null` prototype: use iframe Object with cleared prototype\nvar createDict = function(){\n  // Thrash, waste and sodomy: IE GC bug\n  var iframe = require('./_dom-create')('iframe')\n    , i      = enumBugKeys.length\n    , lt     = '<'\n    , gt     = '>'\n    , iframeDocument;\n  iframe.style.display = 'none';\n  require('./_html').appendChild(iframe);\n  iframe.src = 'javascript:'; // eslint-disable-line no-script-url\n  // createDict = iframe.contentWindow.Object;\n  // html.removeChild(iframe);\n  iframeDocument = iframe.contentWindow.document;\n  iframeDocument.open();\n  iframeDocument.write(lt + 'script' + gt + 'document.F=Object' + lt + '/script' + gt);\n  iframeDocument.close();\n  createDict = iframeDocument.F;\n  while(i--)delete createDict[PROTOTYPE][enumBugKeys[i]];\n  return createDict();\n};\n\nmodule.exports = Object.create || function create(O, Properties){\n  var result;\n  if(O !== null){\n    Empty[PROTOTYPE] = anObject(O);\n    result = new Empty;\n    Empty[PROTOTYPE] = null;\n    // add \"__proto__\" for Object.getPrototypeOf polyfill\n    result[IE_PROTO] = O;\n  } else result = createDict();\n  return Properties === undefined ? result : dPs(result, Properties);\n};\n","// 19.1.2.7 / 15.2.3.4 Object.getOwnPropertyNames(O)\nvar $keys      = require('./_object-keys-internal')\n  , hiddenKeys = require('./_enum-bug-keys').concat('length', 'prototype');\n\nexports.f = Object.getOwnPropertyNames || function getOwnPropertyNames(O){\n  return $keys(O, hiddenKeys);\n};","// fallback for IE11 buggy Object.getOwnPropertyNames with iframe and window\nvar toIObject = require('./_to-iobject')\n  , gOPN      = require('./_object-gopn').f\n  , toString  = {}.toString;\n\nvar windowNames = typeof window == 'object' && window && Object.getOwnPropertyNames\n  ? Object.getOwnPropertyNames(window) : [];\n\nvar getWindowNames = function(it){\n  try {\n    return gOPN(it);\n  } catch(e){\n    return windowNames.slice();\n  }\n};\n\nmodule.exports.f = function getOwnPropertyNames(it){\n  return windowNames && toString.call(it) == '[object Window]' ? getWindowNames(it) : gOPN(toIObject(it));\n};\n","var pIE            = require('./_object-pie')\n  , createDesc     = require('./_property-desc')\n  , toIObject      = require('./_to-iobject')\n  , toPrimitive    = require('./_to-primitive')\n  , has            = require('./_has')\n  , IE8_DOM_DEFINE = require('./_ie8-dom-define')\n  , gOPD           = Object.getOwnPropertyDescriptor;\n\nexports.f = require('./_descriptors') ? gOPD : function getOwnPropertyDescriptor(O, P){\n  O = toIObject(O);\n  P = toPrimitive(P, true);\n  if(IE8_DOM_DEFINE)try {\n    return gOPD(O, P);\n  } catch(e){ /* empty */ }\n  if(has(O, P))return createDesc(!pIE.f.call(O, P), O[P]);\n};","'use strict';\n// ECMAScript 6 symbols shim\nvar global         = require('./_global')\n  , has            = require('./_has')\n  , DESCRIPTORS    = require('./_descriptors')\n  , $export        = require('./_export')\n  , redefine       = require('./_redefine')\n  , META           = require('./_meta').KEY\n  , $fails         = require('./_fails')\n  , shared         = require('./_shared')\n  , setToStringTag = require('./_set-to-string-tag')\n  , uid            = require('./_uid')\n  , wks            = require('./_wks')\n  , wksExt         = require('./_wks-ext')\n  , wksDefine      = require('./_wks-define')\n  , keyOf          = require('./_keyof')\n  , enumKeys       = require('./_enum-keys')\n  , isArray        = require('./_is-array')\n  , anObject       = require('./_an-object')\n  , toIObject      = require('./_to-iobject')\n  , toPrimitive    = require('./_to-primitive')\n  , createDesc     = require('./_property-desc')\n  , _create        = require('./_object-create')\n  , gOPNExt        = require('./_object-gopn-ext')\n  , $GOPD          = require('./_object-gopd')\n  , $DP            = require('./_object-dp')\n  , $keys          = require('./_object-keys')\n  , gOPD           = $GOPD.f\n  , dP             = $DP.f\n  , gOPN           = gOPNExt.f\n  , $Symbol        = global.Symbol\n  , $JSON          = global.JSON\n  , _stringify     = $JSON && $JSON.stringify\n  , PROTOTYPE      = 'prototype'\n  , HIDDEN         = wks('_hidden')\n  , TO_PRIMITIVE   = wks('toPrimitive')\n  , isEnum         = {}.propertyIsEnumerable\n  , SymbolRegistry = shared('symbol-registry')\n  , AllSymbols     = shared('symbols')\n  , OPSymbols      = shared('op-symbols')\n  , ObjectProto    = Object[PROTOTYPE]\n  , USE_NATIVE     = typeof $Symbol == 'function'\n  , QObject        = global.QObject;\n// Don't use setters in Qt Script, https://github.com/zloirock/core-js/issues/173\nvar setter = !QObject || !QObject[PROTOTYPE] || !QObject[PROTOTYPE].findChild;\n\n// fallback for old Android, https://code.google.com/p/v8/issues/detail?id=687\nvar setSymbolDesc = DESCRIPTORS && $fails(function(){\n  return _create(dP({}, 'a', {\n    get: function(){ return dP(this, 'a', {value: 7}).a; }\n  })).a != 7;\n}) ? function(it, key, D){\n  var protoDesc = gOPD(ObjectProto, key);\n  if(protoDesc)delete ObjectProto[key];\n  dP(it, key, D);\n  if(protoDesc && it !== ObjectProto)dP(ObjectProto, key, protoDesc);\n} : dP;\n\nvar wrap = function(tag){\n  var sym = AllSymbols[tag] = _create($Symbol[PROTOTYPE]);\n  sym._k = tag;\n  return sym;\n};\n\nvar isSymbol = USE_NATIVE && typeof $Symbol.iterator == 'symbol' ? function(it){\n  return typeof it == 'symbol';\n} : function(it){\n  return it instanceof $Symbol;\n};\n\nvar $defineProperty = function defineProperty(it, key, D){\n  if(it === ObjectProto)$defineProperty(OPSymbols, key, D);\n  anObject(it);\n  key = toPrimitive(key, true);\n  anObject(D);\n  if(has(AllSymbols, key)){\n    if(!D.enumerable){\n      if(!has(it, HIDDEN))dP(it, HIDDEN, createDesc(1, {}));\n      it[HIDDEN][key] = true;\n    } else {\n      if(has(it, HIDDEN) && it[HIDDEN][key])it[HIDDEN][key] = false;\n      D = _create(D, {enumerable: createDesc(0, false)});\n    } return setSymbolDesc(it, key, D);\n  } return dP(it, key, D);\n};\nvar $defineProperties = function defineProperties(it, P){\n  anObject(it);\n  var keys = enumKeys(P = toIObject(P))\n    , i    = 0\n    , l = keys.length\n    , key;\n  while(l > i)$defineProperty(it, key = keys[i++], P[key]);\n  return it;\n};\nvar $create = function create(it, P){\n  return P === undefined ? _create(it) : $defineProperties(_create(it), P);\n};\nvar $propertyIsEnumerable = function propertyIsEnumerable(key){\n  var E = isEnum.call(this, key = toPrimitive(key, true));\n  if(this === ObjectProto && has(AllSymbols, key) && !has(OPSymbols, key))return false;\n  return E || !has(this, key) || !has(AllSymbols, key) || has(this, HIDDEN) && this[HIDDEN][key] ? E : true;\n};\nvar $getOwnPropertyDescriptor = function getOwnPropertyDescriptor(it, key){\n  it  = toIObject(it);\n  key = toPrimitive(key, true);\n  if(it === ObjectProto && has(AllSymbols, key) && !has(OPSymbols, key))return;\n  var D = gOPD(it, key);\n  if(D && has(AllSymbols, key) && !(has(it, HIDDEN) && it[HIDDEN][key]))D.enumerable = true;\n  return D;\n};\nvar $getOwnPropertyNames = function getOwnPropertyNames(it){\n  var names  = gOPN(toIObject(it))\n    , result = []\n    , i      = 0\n    , key;\n  while(names.length > i){\n    if(!has(AllSymbols, key = names[i++]) && key != HIDDEN && key != META)result.push(key);\n  } return result;\n};\nvar $getOwnPropertySymbols = function getOwnPropertySymbols(it){\n  var IS_OP  = it === ObjectProto\n    , names  = gOPN(IS_OP ? OPSymbols : toIObject(it))\n    , result = []\n    , i      = 0\n    , key;\n  while(names.length > i){\n    if(has(AllSymbols, key = names[i++]) && (IS_OP ? has(ObjectProto, key) : true))result.push(AllSymbols[key]);\n  } return result;\n};\n\n// 19.4.1.1 Symbol([description])\nif(!USE_NATIVE){\n  $Symbol = function Symbol(){\n    if(this instanceof $Symbol)throw TypeError('Symbol is not a constructor!');\n    var tag = uid(arguments.length > 0 ? arguments[0] : undefined);\n    var $set = function(value){\n      if(this === ObjectProto)$set.call(OPSymbols, value);\n      if(has(this, HIDDEN) && has(this[HIDDEN], tag))this[HIDDEN][tag] = false;\n      setSymbolDesc(this, tag, createDesc(1, value));\n    };\n    if(DESCRIPTORS && setter)setSymbolDesc(ObjectProto, tag, {configurable: true, set: $set});\n    return wrap(tag);\n  };\n  redefine($Symbol[PROTOTYPE], 'toString', function toString(){\n    return this._k;\n  });\n\n  $GOPD.f = $getOwnPropertyDescriptor;\n  $DP.f   = $defineProperty;\n  require('./_object-gopn').f = gOPNExt.f = $getOwnPropertyNames;\n  require('./_object-pie').f  = $propertyIsEnumerable;\n  require('./_object-gops').f = $getOwnPropertySymbols;\n\n  if(DESCRIPTORS && !require('./_library')){\n    redefine(ObjectProto, 'propertyIsEnumerable', $propertyIsEnumerable, true);\n  }\n\n  wksExt.f = function(name){\n    return wrap(wks(name));\n  }\n}\n\n$export($export.G + $export.W + $export.F * !USE_NATIVE, {Symbol: $Symbol});\n\nfor(var symbols = (\n  // 19.4.2.2, 19.4.2.3, 19.4.2.4, 19.4.2.6, 19.4.2.8, 19.4.2.9, 19.4.2.10, 19.4.2.11, 19.4.2.12, 19.4.2.13, 19.4.2.14\n  'hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables'\n).split(','), i = 0; symbols.length > i; )wks(symbols[i++]);\n\nfor(var symbols = $keys(wks.store), i = 0; symbols.length > i; )wksDefine(symbols[i++]);\n\n$export($export.S + $export.F * !USE_NATIVE, 'Symbol', {\n  // 19.4.2.1 Symbol.for(key)\n  'for': function(key){\n    return has(SymbolRegistry, key += '')\n      ? SymbolRegistry[key]\n      : SymbolRegistry[key] = $Symbol(key);\n  },\n  // 19.4.2.5 Symbol.keyFor(sym)\n  keyFor: function keyFor(key){\n    if(isSymbol(key))return keyOf(SymbolRegistry, key);\n    throw TypeError(key + ' is not a symbol!');\n  },\n  useSetter: function(){ setter = true; },\n  useSimple: function(){ setter = false; }\n});\n\n$export($export.S + $export.F * !USE_NATIVE, 'Object', {\n  // 19.1.2.2 Object.create(O [, Properties])\n  create: $create,\n  // 19.1.2.4 Object.defineProperty(O, P, Attributes)\n  defineProperty: $defineProperty,\n  // 19.1.2.3 Object.defineProperties(O, Properties)\n  defineProperties: $defineProperties,\n  // 19.1.2.6 Object.getOwnPropertyDescriptor(O, P)\n  getOwnPropertyDescriptor: $getOwnPropertyDescriptor,\n  // 19.1.2.7 Object.getOwnPropertyNames(O)\n  getOwnPropertyNames: $getOwnPropertyNames,\n  // 19.1.2.8 Object.getOwnPropertySymbols(O)\n  getOwnPropertySymbols: $getOwnPropertySymbols\n});\n\n// 24.3.2 JSON.stringify(value [, replacer [, space]])\n$JSON && $export($export.S + $export.F * (!USE_NATIVE || $fails(function(){\n  var S = $Symbol();\n  // MS Edge converts symbol values to JSON as {}\n  // WebKit converts symbol values to JSON as null\n  // V8 throws on boxed symbols\n  return _stringify([S]) != '[null]' || _stringify({a: S}) != '{}' || _stringify(Object(S)) != '{}';\n})), 'JSON', {\n  stringify: function stringify(it){\n    if(it === undefined || isSymbol(it))return; // IE8 returns string on undefined\n    var args = [it]\n      , i    = 1\n      , replacer, $replacer;\n    while(arguments.length > i)args.push(arguments[i++]);\n    replacer = args[1];\n    if(typeof replacer == 'function')$replacer = replacer;\n    if($replacer || !isArray(replacer))replacer = function(key, value){\n      if($replacer)value = $replacer.call(this, key, value);\n      if(!isSymbol(value))return value;\n    };\n    args[1] = replacer;\n    return _stringify.apply($JSON, args);\n  }\n});\n\n// 19.4.3.4 Symbol.prototype[@@toPrimitive](hint)\n$Symbol[PROTOTYPE][TO_PRIMITIVE] || require('./_hide')($Symbol[PROTOTYPE], TO_PRIMITIVE, $Symbol[PROTOTYPE].valueOf);\n// 19.4.3.5 Symbol.prototype[@@toStringTag]\nsetToStringTag($Symbol, 'Symbol');\n// 20.2.1.9 Math[@@toStringTag]\nsetToStringTag(Math, 'Math', true);\n// 24.3.3 JSON[@@toStringTag]\nsetToStringTag(global.JSON, 'JSON', true);","/**\n * Copyright (c) 2014, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * https://raw.github.com/facebook/regenerator/master/LICENSE file. An\n * additional grant of patent rights can be found in the PATENTS file in\n * the same directory.\n */\n\n!(function(global) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  var inModule = typeof module === \"object\";\n  var runtime = global.regeneratorRuntime;\n  if (runtime) {\n    if (inModule) {\n      // If regeneratorRuntime is defined globally and we're in a module,\n      // make the exports object identical to regeneratorRuntime.\n      module.exports = runtime;\n    }\n    // Don't bother evaluating the rest of this file if the runtime was\n    // already defined globally.\n    return;\n  }\n\n  // Define the runtime globally (as expected by generated code) as either\n  // module.exports (if we're in a module) or a new, empty object.\n  runtime = global.regeneratorRuntime = inModule ? module.exports : {};\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  runtime.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunctionPrototype[toStringTagSymbol] =\n    GeneratorFunction.displayName = \"GeneratorFunction\";\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      prototype[method] = function(arg) {\n        return this._invoke(method, arg);\n      };\n    });\n  }\n\n  runtime.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  runtime.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      if (!(toStringTagSymbol in genFun)) {\n        genFun[toStringTagSymbol] = \"GeneratorFunction\";\n      }\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  runtime.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return Promise.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return Promise.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration. If the Promise is rejected, however, the\n          // result for this iteration will be rejected with the same\n          // reason. Note that rejections of yielded Promises are not\n          // thrown back into the generator function, as is the case\n          // when an awaited Promise is rejected. This difference in\n          // behavior between yield and await is important, because it\n          // allows the consumer to decide what to do with the yielded\n          // rejection (swallow it and continue, manually .throw it back\n          // into the generator, abandon iteration, whatever). With\n          // await, by contrast, there is no opportunity to examine the\n          // rejection reason outside the generator function, so the\n          // only option is to throw it from the await expression, and\n          // let the generator function handle the exception.\n          result.value = unwrapped;\n          resolve(result);\n        }, reject);\n      }\n    }\n\n    if (typeof global.process === \"object\" && global.process.domain) {\n      invoke = global.process.domain.bind(invoke);\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new Promise(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n  runtime.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  runtime.async = function(innerFn, outerFn, self, tryLocsList) {\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList)\n    );\n\n    return runtime.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        if (delegate.iterator.return) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  Gp[toStringTagSymbol] = \"Generator\";\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  Gp[iteratorSymbol] = function() {\n    return this;\n  };\n\n  Gp.toString = function() {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  runtime.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  runtime.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n})(\n  // Among the various tricks for obtaining a reference to the global\n  // object, this seems to be the most reliable technique that does not\n  // use indirect eval (which violates Content Security Policy).\n  typeof global === \"object\" ? global :\n  typeof window === \"object\" ? window :\n  typeof self === \"object\" ? self : this\n);\n","\n/**\n * @fileoverview Polyfills included for Emojityper on non-module browsers.\n */\n\nimport '../../node_modules/core-js/modules/es6.string.starts-with';\nimport '../../node_modules/core-js/modules/es6.string.from-code-point';\nimport '../../node_modules/core-js/modules/es6.array.from';\nimport '../../node_modules/core-js/modules/es6.promise';\nimport '../../node_modules/core-js/modules/es6.symbol';\n\n// IE11 CustomEvent\nif (typeof window.CustomEvent !== 'function') {\n  function CustomEvent(name, params) {\n    params = params || {bubbles: false, cancelable: false, detail: undefined};\n    const event = document.createEvent('CustomEvent');\n    event.initCustomEvent(name, params.bubbles, params.cancelable, params.detail);\n    return event;\n  }\n  CustomEvent.prototype = window.Event.prototype;\n  window.CustomEvent = CustomEvent;\n}\n\n// IE11 Element.remove\nif (!Element.prototype.hasOwnProperty('remove')) {\n  Object.defineProperty(Element.prototype, 'remove', {\n    configurable: true,\n    enumerable: true,\n    writable: true,\n    value: function remove() {\n      this.parentNode && this.parentNode.removeChild(this);\n    },\n  });\n}\n\n// IE11 classList.toggle 2nd arg\nconst testEl = document.createElement('div');\ntestEl.classList.toggle('testClass', false);\nif (testEl.classList.contains('testClass')) {\n  const original = DOMTokenList.prototype.toggle;\n  DOMTokenList.prototype.toggle = function(name, force) {\n    if (force === undefined) {\n      return original.call(this, name);\n    } else if (force) {\n      this.add(name);\n    } else {\n      this.remove(name);\n    }\n    return this.contains(name);\n  };\n}\n\n// non-polyfill for window.fetch\nif (!window.fetch) {\n  window.fetch = () => Promise.reject('unsupported');\n}\n\n// for async/await magic\n// nb. this puts regeneratorRuntime into the top-level scope\nimport '../../node_modules/regenerator-runtime/runtime.js';\n","\nconst canvas = document.createElement('canvas');\nconst context = canvas.getContext('2d');\ncontext.font = '1px monospace';\n\n/**\n * @param {string} string to measure\n * @return {number} length of text in monospace units\n */\nconst measureText = (function() {\n  let cache = {};\n  let count = 0;\n\n  return s => {\n    let result = cache[s];\n    if (result === undefined) {\n      cache[s] = result = context.measureText(s).width;\n      if (++count > 4000) {\n        // nb. at June 2017, there's about ~1,800 emojis including variations, so this number is\n        // probably greater than we'll ever use: still, empty if it's too big\n        cache = {};\n        count = 0;\n      }\n    }\n    return result;\n  };\n}());\n\n/**\n * @type {boolean} whether this platform probably has fixed width emoji\n */\nconst fixedWidthEmoji = Boolean(/Mac|Android|iP(hone|od|ad)/.exec(navigator.platform));\n\n/**\n * @param {string} string to measure\n * @return {boolean} whether this is a single char long (and probably a single emoji)\n */\nconst isSingle = (function() {\n  const debugMode = window.location.search.indexOf('debug') !== -1;\n\n  // get a baseline emoji width: this is the well-supported 'FACE WITH TEARS OF JOY'\n  const emojiWidth = measureText('\\u{1f602}');\n  if (fixedWidthEmoji) {\n    if (debugMode) {\n      console.info('fixed emoji width is', emojiWidth, 'for \\u{1f602}');\n      return (s) => {\n        const ok = measureText(s) === emojiWidth;\n        if (!ok) {\n          console.debug('isSingle can\\'t render', s, 'width', measureText(s));\n        }\n        return ok;\n      };\n    }\n    // great! We can quickly check this!\n    return (s) => measureText(s) === emojiWidth;\n  }\n\n  const invalidWidth = context.measureText('\\u{ffffd}').width;\n  const characterWidth = context.measureText('a').width;\n  if (debugMode) {\n    console.info('invalid char has width', invalidWidth, 'ascii char has width', characterWidth);\n  }\n  return (s) => {\n    const width = measureText(s);\n    if (debugMode) {\n      console.debug('isSingle', s, 'has width', width);\n    }\n    return (width !== invalidWidth && width < invalidWidth * 2 && width > characterWidth) ||\n        width === emojiWidth;\n  };\n}());\n\n/**\n * Is this string rendering correctly as an emoji or sequence of emojis? On variable width\n * platforms, this can take O(n).\n *\n * @param {string} string to check\n * @return {boolean} whether this is probably an emoji\n */\nexport const isExpectedLength = (function() {\n  // FIXME: This treats ZWJ'ed characters that aren't a single char as invalid. Maybe it's not\n  // worth worrying, but instead just checking that all the points are valid emoji.\n\n  if (fixedWidthEmoji) {\n    // use 'FACE WITH TEARS OF JOY'\n    const emojiWidth = measureText('\\u{1f602}');\n    return (s) => {\n      // emojis could be _smaller_ than expected, but not larger- and not random non-unit widths\n      const points = jsdecode(s);\n      const chars = splitEmoji(points);\n\n      // count flags, reduce expected by / 2\n      const flags = chars.reduce((total, char) => total += isFlagPoint(char[0].point) ? 1 : 0, 0);\n      const expectedLength = chars.length - Math.ceil(flags / 2);\n\n      const width = measureText(s) / emojiWidth;\n\n      // does this have non-emoji characters in it?\n      if (Math.floor(width) !== width) { return false; }\n\n      // otherwise, as long as we're equal or smaller\n      return width <= expectedLength;\n    };\n  }\n\n  const invalidWidth = context.measureText('\\u{ffffd}').width;\n  return (s) => {\n    const points = jsdecode(s);\n    const chars = splitEmoji(points);\n    const clen = chars.length;\n    for (let i = 0; i < clen; ++i) {\n      const char = chars[i];\n      if (char.length === 0 && isFlagPoint(char[0].point)) {\n        continue;  // treat flag chars as A-OK\n      }\n      // measure this particular point and ensure it's single.\n      const s = String.fromCodePoint(...char.map(c => c.point));\n      if (!isSingle(s)) {\n        return false;\n      }\n    }\n\n    return true;\n  };\n}());\n\n/**\n * True if the standard \"female\" icon can be varied with a diversity modifier. This is the basic\n * level of emoji diversity support, but doesn't imply support for all the professions.\n *\n * @type {boolean}\n */\nconst basicDiversity = (measureText('\\u{1f468}\\u{1f3fb}') === measureText('\\u{1f468}'));\n\n/**\n * @param {number} p\n * @return {boolean} whether the passed rune is a gender character\n */\nfunction isPointGender(p) {\n  return p === 0x2640 || p === 0x2642;\n}\n\n/**\n * @param {number} p\n * @return {boolean} whether the passed rune is a basic emoji person gender: Man or Woman\n */\nfunction isPersonGender(p) {\n  return p === 0x1f468 || p === 0x1f469;\n}\n\n/**\n * @param {number} p\n * @return {boolean} whether this is a subordinate member of a family sequence: boy/girl/baby\n */\nfunction isFamilyMember(p) {\n  return p === 0x1f476 || p === 0x1f466 || p === 0x1f467;\n}\n\n/**\n * @param {number} p\n * @return {boolean} whether the passed rune is a Variation_Selector\n */\nfunction isVariationSelector(p) {\n  return (p >= 0xfe00 && p <= 0xfe0f) || (p >= 0xe0100 && p <= 0xe01ef);\n}\n\n/**\n * @param {number} p\n * @return {boolean} whether the passed rune is a diversity selector (one of five skin tones)\n */\nfunction isDiversitySelector(p) {\n  return p >= 0x1f3fb && p <= 0x1f3ff;\n}\n\n/**\n * @param {number} p\n * @return {boolean} whether the passed rune is one of A-Z for flags\n */\nfunction isFlagPoint(p) {\n  return p >= 0x1f1e6 && p <= 0x1f1ff;\n}\n\n/**\n * @param {number} p\n * @return {boolean} whether the passed rune is probably not a modifier base\n */\nfunction unlikelyModifierBase(p) {\n  return p < 0x261d || isPointGender(p) || isVariationSelector(p) || isDiversitySelector(p) ||\n      isFlagPoint(p);\n}\n\n/**\n * Decodes a JavaScript string into Unicode code points.\n *\n * @param {string} s to decode\n * @return {!Array<number>} code points\n */\nfunction jsdecode(s) {\n  const len = s.length;\n  const points = [];\n\n  for (let i = 0; i < len;) {\n    const raw = s.charCodeAt(i++) || 0;\n    if (raw < 0xd800 || raw > 0xdbff || i === len) {\n      // not a high surrogate, or end of string\n    } else {\n      const extra = s.charCodeAt(i) || 0;\n      if ((extra & 0xfc00) === 0xdc00) {\n        // got a low surrogate, eat 2nd char\n        ++i;\n        points.push(0x10000 + (extra & 0x3ff) + ((raw & 0x3ff) << 10));\n        continue;\n      }\n    }\n    points.push(raw);\n  }\n\n  return points;\n}\n\n/**\n * Returns details about a character and whether it can be gender flipped to a single or neutral\n * gender. This contains emojis which, due to historical emoji reasons, aren't officially versions\n * of each other: e.g., Santa and Mrs. Claus, or Old {Man,Woman,Adult}.\n *\n * @param {number} point to look up in the other gender flips table\n * @return {{single: boolean, neutral: boolean, points: {f: number, m: number, n: number}}?}\n */\nconst genderFlip = (function() {\n  // TODO: covers F/M/neutral, but _not_ mixed (e.g. holding hands => no m/f combo)\n  const list = [\n    0x1f936, 0x1f385, 0,        // mrs. claus, santa\n    0x1f483, 0x1f57a, 0,        // dancers\n    0x1f470, 0x1f935, 0,        // bride, man in tuxedo\n    0x1f467, 0x1f466, 0x1f9d2,  // girl, boy, child\n    0x1f475, 0x1f474, 0x1f9d3,  // old {woman,man,adult}\n    0x1f46d, 0x1f46c, 0,        // women/men holding hands\n    0x1f478, 0x1f934, 0,        // princess, prince\n  ];\n\n  // build map with raw data only\n  const all = new Map();\n  for (let i = 0; i < list.length; i += 3) {\n    const data = {\n      points: {f: list[i], m: list[i+1], n: list[i+2]},\n    };\n    for (let j = 0; j < 3; ++j) {\n      const v = list[i+j];\n      if (v) {\n        if (all.has(v)) {\n          throw new Error('duplicate in gender list: ' + v);\n        }\n        all.set(v, data);\n      }\n    }\n  }\n\n  // return helper\n  return point => {\n    const out = all.get(point) || null;\n    if (out && out.single === undefined) {\n      // do the heavy lifting only when first fetched\n      out.single = isSingle(String.fromCodePoint(out.points.f)) &&\n          isSingle(String.fromCodePoint(out.points.m));\n      out.neutral = out.points.n && isSingle(String.fromCodePoint(out.points.n));\n    }\n    return out;\n  };\n}());\n\n/**\n * Splits a single emoji into raw characters, removing variants or diversity modifiers. Each\n * sub-array represents a character previously split by ZWJs.\n *\n * @param {!Array<number>} points\n * @return {!Array<!Array<{point: number, suffix: number}>>}\n */\nfunction splitEmoji(points) {\n  if (!points.length) {\n    return [];\n  }\n  let curr = [{point: points[0], suffix: 0}];\n  const out = [curr];\n\n  // TODO: doesn't deal with flags or regional letters\n  // flags are weird: U + N + A, for instance, will render the Namibia flag where the UN flag is\n  // not supported (but the UN flag where it is)- taking the left-most valid code\n  // NOTE: the regional flag letters are seen as _emoji_ on their own, at least on Mac.\n\n  for (let i = 1; i < points.length; ++i) {\n    const check = points[i];\n\n    if (isFlagPoint(curr[curr.length-1].point)) {\n      // previous was a flag, create a new one\n    } else if (isDiversitySelector(check) || isVariationSelector(check)) {\n      // store in suffix\n      curr[curr.length-1].suffix = check;\n      continue;\n    } else if (check === 0x200d) {\n      // push next char onto curr\n      const next = points[++i];\n      next && curr.push({point: next, suffix: 0});\n      continue;\n    }\n\n    // new character, reset\n    curr = [{point: check, suffix: 0}];\n    out.push(curr);\n  }\n  return out;\n}\n\n/**\n * Analyses or modifes an emoji string for modifier support: diversity and gender.\n *\n * This might be O(n), including the cost of measuring every individual character via measureText.\n *\n * @param {string} s\n * @param {{tone: undefined|number, gender: undefined|string}=} opt_op\n * @return {out: (string|undefined), tone: boolean, gender: {single: boolean, double: boolean, neutral: boolean}}\n */\nexport function modify(s, opt_op) {\n  const stats = {tone: false, gender: {single: false, double: false, neutral: false}};\n  if (!s) {\n    return stats;\n  }\n  const points = jsdecode(s);\n\n  // split out gender modifiers and other variations with splitEmoji, walk chars\n  const chars = splitEmoji(points);\n  const record = (opt_op ? [] : null);\n  chars.some((char, i) => {\n    const first = char[0].point;\n    let genderable = 0;\n    let family = false;\n\n    // search for existing gender characters\n    char.forEach(ch => {\n      const p = ch.point;\n      if (isPointGender(p)) {\n        // we can remove or replace the point\n        stats.gender.single = true;\n        stats.gender.neutral = true;\n      } else if (isPersonGender(p)) {\n        // easily swappable person\n        stats.gender.single = true;\n        if (++genderable >= 2) {\n          stats.gender.double = true;\n        }\n      } else if (isFamilyMember(p) && genderable) {\n        // this run is a family (child and already has parent), so it can't be made diverse\n        family = true;\n      } else {\n        // look for potential gender flips\n        const flip = genderFlip(p);\n        if (flip) {\n          stats.gender.single |= flip.single;\n          stats.gender.neutral |= flip.neutral;\n        }\n      }\n    });\n\n    // check for professions ('non family person'): single initial person gender, not a family\n    const isSinglePerson =\n        genderable ? (isPersonGender(first) && genderable === 1 && !family) : undefined;\n    if (isSinglePerson) {\n      stats.tone = basicDiversity;\n    }\n    if (record) {\n      // true: is a 'non family person', aka profession or disembodied head (diversity OK)\n      // false: is a family or other combined group of persons (no diversity)\n      // undefined: something else\n      record[i] = isSinglePerson;\n    }\n\n    // check for early exhaustive answer\n    if ((stats.tone || !basicDiversity) && stats.gender.neutral) {\n      // ... don't finish 'some' early if we're recording gender data\n      return !record && stats.gender.single && stats.gender.double;\n    }\n\n    // skip if profession, low emojis (everything below Emoji_Modifier_Base) and male/female signs\n    if (isSinglePerson === false || unlikelyModifierBase(first)) { return; }\n\n    // do slow measure checks\n    // TODO: can we use \\p{Modifier_Base} as a faster check than measureText for +ve case?\n    const candidate = String.fromCodePoint(first);\n    if (basicDiversity && !stats.tone && isSingle(candidate + '\\u{1f3fb}')) {\n      stats.tone = true;\n    }\n    if (!stats.gender.neutral && isSingle(candidate + '\\u{200d}\\u{2640}\\u{fe0f}')) {\n      stats.gender.neutral = true;\n      stats.gender.single = true;\n    }\n  });\n\n  // early out without op\n  if (!opt_op) {\n    return stats;\n  }\n\n  // gender helper: modifies passed character to apply next gender (or returns new ch)\n  const nextGenderPoint = (function() {\n    const g = opt_op.gender || '';\n    let previousMaster;\n    let index;\n    return (master, opt_point, opt_allowOtherFlip) => {\n      if (previousMaster === undefined || master !== previousMaster) {\n        previousMaster = master;\n        index = 0;\n      } else {\n        ++index;\n      }\n      const next = g ? g[index % g.length] : '';\n      const point = opt_point || 0;\n      if (isPersonGender(point)) {\n        // if this is a person, return the alternative person (or make no change)\n        return next ? (next === 'm' ? 0x1f468 : 0x1f469) : point;\n      } else if (!point || isPointGender(point)) {\n        // if this is a point, return the alternative point (or clear)\n        return next ? (next === 'm' ? 0x2642 : 0x2640) : 0;\n      } else if (opt_allowOtherFlip) {\n        // do other gender flips: note that some of these have F/M/N, but not all have N\n        const flip = genderFlip(point);\n        if (flip) {\n          if (!next && flip.neutral) {\n            return flip.points.n;\n          } else if (next && flip.single) {\n            return next === 'm' ? flip.points.m : flip.points.f;\n          }\n        }\n      }\n      // didn't consume anything\n      --index;\n      return point;\n    };\n  }());\n\n  // walk over all chars, apply change\n  const out = chars.map((char, i) => {\n    const points = [];  // used as nonce, declare first\n    const isSinglePerson = record[i];\n    const first = char[0].point;\n\n    if (opt_op.gender !== undefined) {\n      // replace/remove existing male/female characters\n      // nb. this removes orphaned gender point characters\n      const allowOtherFlip = (isSinglePerson === undefined);  // not for family/profession\n      char.forEach(ch => ch.point = nextGenderPoint(points, ch.point, allowOtherFlip));\n\n      // under various conditions, add a gender modifier to a single point\n      if (isSinglePerson === undefined && char.length === 1 && !isPointGender(first)) {\n        const genderPoint = nextGenderPoint(points);\n        if (genderPoint && isSingle(String.fromCodePoint(first) + '\\u{200d}\\u{2640}\\u{fe0f}')) {\n          char.push({suffix: 0xfe0f, point: genderPoint});\n        }\n      }\n    }\n\n    // apply diversity\n    if (opt_op.tone !== undefined) {\n      char.forEach((ch, i) => {\n        if (isDiversitySelector(ch.suffix)) {\n          // always tweak existing diversity modifiers\n          ch.suffix = opt_op.tone;\n        } else if (i === 0 && basicDiversity && isSinglePerson !== false) {\n          // if it's the first point in a non-family, try to apply diversity\n          if (isSinglePerson || isSingle(String.fromCodePoint(first) + '\\u{1f3fb}')) {\n            ch.suffix = opt_op.tone;\n          }\n        }\n      });\n    }\n\n    // flatten into actual codepoints again\n    char.forEach(ch => {\n      if (ch.point) {\n        points.length && points.push(0x200d);\n        points.push(ch.point);\n        ch.suffix && points.push(ch.suffix);\n      }\n    });\n    return points;\n  }).reduce((all, points) => all.concat(points), []);\n\n  stats.out = String.fromCodePoint(...out);\n  return stats;\n};\n","\nimport * as modifier from './lib/modifier.js';\n\nfunction datasetSafeDelete(el, ...keys) {\n  const d = el.dataset;\n  keys.forEach((key) => {\n    if (key in d) {\n      delete d[key];\n    }\n  });\n}\n\n// word focus handler\nfunction upgrade(el) {\n  const isWordCode = (code) => {\n    // FIXME: turns out matching non-emoji is hard\n    // TODO: this RegExp _might_ work but it needs transpiling-\n    // new RegExp(/(?:[\\p{Letter}\\p{Number}\\p{Punctuation}](?!\\u{fe0f}?\\u{20e3}))+/u);\n    return code < 5000 && code != 32;\n  };\n\n  const helper = document.createElement('div');\n  helper.className = 'overflow-helper';\n  el.parentNode.insertBefore(helper, el);\n\n  const underline = document.createElement('div');\n  underline.className = 'underline';\n  helper.appendChild(underline);\n\n  // measures the width of text\n  const measureText = (function() {\n    const sizer = document.createElement('div');\n    sizer.className = 'sizer';\n    helper.appendChild(sizer);\n\n    const nonce = document.createElement('div');\n    nonce.className = 'nonce';\n\n    return (text) => {\n      sizer.textContent = text;\n      sizer.appendChild(nonce);\n      return nonce.offsetLeft;\n    }\n  }());\n\n  // hide underline until load: the font used might not be ready, so it's probably out of whack\n  if (document.readyState !== 'complete') {\n    underline.classList.add('loading');\n    window.addEventListener('load', (ev) => {\n      renderLine();\n      underline.classList.remove('loading');\n    });\n  }\n\n  const renderLine = () => {\n    if (el.dataset.from === undefined) {\n      underline.hidden = true;\n      return false;\n    }\n    const [from, to] = [+el.dataset.from, +el.dataset.to];\n\n    // otherwise, record and draw the line\n    const left = measureText(el.value.substr(0, from));\n    const width = measureText(el.value.substr(from, to - from));\n\n    if (width < 0 && !document.getElementById('less')) {\n      // nb. this seems to happen in dev with lesscss\n      console.warn('invalid sizer width', width, 'for text', sizer.textContent);\n    }\n\n    underline.hidden = width <= 0;\n    underline.style.left = left + 'px';\n    underline.style.width = width + 'px';\n    underline.style.transform = 'translateX(-' + el.scrollLeft + 'px)';\n  };\n\n  // force selection\n  const setRange = (from, to) => {\n    [el.dataset.from, el.dataset.to] = [from, to];\n    if (from >= to) {\n      datasetSafeDelete(el, 'prefix', 'word', 'focus');\n      underline.hidden = true;\n      return false;\n    }\n    el.dataset['focus'] = el.value.substr(from, to - from);\n    renderLine();\n    return true;\n  };\n\n  // state/handler keep track of the current focus word (plus scroll position, if input is big)\n  const initialLength = el.value.length;\n  const state = {start: initialLength, end: initialLength, value: undefined};\n  const changeHandler = (permitNextChange) => {\n    if (permitNextChange !== false &&\n        el.selectionStart === state.start &&\n        el.selectionEnd === state.end &&\n        el.value === state.value) {\n      return true;  // already at this state\n    }\n    [state.start, state.end] = [el.selectionStart, el.selectionEnd];\n    if (state.value !== el.value) {\n      el.dispatchEvent(new CustomEvent('value', {detail: el.value}));\n      state.value = el.value;\n    }\n\n    // range selection, magic\n    if (state.start !== state.end) {\n      datasetSafeDelete(el, 'prefix', 'word');\n\n      setRange(state.start, state.end);\n\n      underline.classList.add('range');\n      el.classList.add('range');\n      return false;\n    }\n    underline.classList.remove('range');\n    el.classList.remove('range');\n\n    // calculate from/to locally\n    let from = state.start;\n    let to = state.start;\n\n    // are we at the end (only have spaces until end)?\n    const isAtEnd = !el.value.substr(state.end).trim();\n    const isNotWordAfter = isAtEnd || !isWordCode(el.value.charCodeAt(state.end));\n\n    if (isNotWordAfter) {\n      for (; to > 0; --to) {\n        if (el.value.charCodeAt(to - 1) !== 32) {\n          break;\n        }\n      }\n      if (to < from) {\n        from = to;\n      }\n    }\n\n    // walk backwards while the previous character is a word\n    for (; from > 0; --from) {\n      if (!isWordCode(el.value.charCodeAt(from - 1))) {\n        break;\n      }\n    }\n\n    // walk forwards while the next char is not a space\n    for (; to < el.value.length; ++to) {\n      if (!isWordCode(el.value.charCodeAt(to))) {\n        break;\n      }\n    }\n\n    // if it's invalid, but there's not a word after, and we were permitted, ignore\n    if (from >= to && isNotWordAfter && permitNextChange) { return; }\n    if (setRange(from, to)) {\n      // if the range was valid, update the prefix/focus but delete the word (in typing state)\n      el.dataset['focus'] = el.dataset['prefix'] = el.value.substr(from, to - from);\n      datasetSafeDelete(el, 'word');\n    }\n  };\n\n  // runs change handler and emits the 'word' event as appropriate\n  let previousDetail = {};\n  const mergedEventHandler = (events, permitNextChange) => {\n    // if there was a focus event, don't let the browser take over: reset previous known good\n    if (events.has('focus')) {\n      // only if it wasn't a range selection (otherwise clicking back retains range, weird)\n      if (state.start === state.end) {\n        // TODO: this sets on initial load, even though it probably doesn't need to\n        [el.selectionStart, el.selectionEnd] = [state.start, state.end];\n      }\n    }\n\n    // run change handler: if true, nothing changed\n    if (changeHandler(permitNextChange)) { return; }\n\n    // send query: prefix or whole-word\n    let text = el.dataset.prefix || el.dataset.word || null;\n    if (!el.dataset.focus) {\n      text = '';  // nothing focused, pretend it's empty input\n    }\n    const detail = {\n      text,\n      prefix: 'prefix' in el.dataset,\n      focus: el.dataset.focus,\n      selection: (el.selectionStart !== el.selectionEnd),\n    };\n\n    // send event only if something has changed\n    if (detail.text !== previousDetail.text ||\n        detail.prefix !== previousDetail.prefix ||\n        detail.focus !== previousDetail.focus ||\n        detail.selection !== previousDetail.selection) {\n      previousDetail = detail;\n      el.dispatchEvent(new CustomEvent('query', {detail}));\n    }\n  };\n\n  // dedup listeners on a rAF\n  let permitNextChange;  // FIXME: global-ish scope is ugly\n  (function() {\n    let frame;\n    let events = new Set();  // records the events that occured to cause this\n    const dedup = (ev) => {\n      if (!frame) {\n        permitNextChange = undefined;\n        events.clear();\n        frame = window.requestAnimationFrame(() => {\n          frame = null;\n          mergedEventHandler(events, permitNextChange);\n        });\n      }\n      ev && events.add(ev.type);\n    };\n\n    // lots of listeners for a million different change reasons\n    const rest = 'change keydown keypress focus click mousedown select input';\n    rest.split(/\\s+/).forEach((event) => el.addEventListener(event, dedup));\n    dedup();\n\n    // if a user is dragging around, this might be changing the offsetLeft (dragging input l/r)\n    el.addEventListener('mousemove', (ev) => {\n      if (ev.which) {\n        dedup();\n      }\n    });\n\n    // add 'selectionchange' (only valid on document) to listen to the initial long-press selection\n    // on Chrome (possibly others?) mobile: it doesn't generate 'select'.\n    document.addEventListener('selectionchange', (ev) => {\n      if (document.activeElement === el) {\n        dedup();\n      }\n    });\n\n    // on blur, after a backspace, Chrome moves the start/end selection: fix it\n    let scrollLeftOnBlur = false;\n    el.addEventListener('blur', (ev) => {\n      if (el.scrollLeft) {\n        scrollLeftOnBlur = el.scrollLeft || false;\n      }\n      if (el.selectionStart !== state.start || el.selectionStart !== state.end) {\n        [el.selectionStart, el.selectionEnd] = [state.start, state.end];\n      }\n    }, true);\n    el.addEventListener('focusout', (ev) => {\n      if (scrollLeftOnBlur !== false) {\n        el.scrollLeft = scrollLeftOnBlur;\n        scrollLeftOnBlur = false;\n      }\n    }, true);\n  }());\n\n  // add a non-deduped keydown handler, to run before others and intercept space\n  el.addEventListener('keydown', (ev) => {\n    switch (ev.key) {\n    case 'Escape':\n      permitNextChange = false;  // force next change\n      break;\n\n    case ' ':\n      if (el.dataset.prefix && el.selectionStart === +el.dataset.to) {\n        el.dispatchEvent(new CustomEvent('request', {detail: el.dataset.prefix}));\n      }\n\n      // TODO: do this to prevent actually space being hit (@samthor prefers it this way)\n      //ev.preventDefault();\n      break;\n    }\n  });\n\n  // add a non-deduped keyup handler, for space on mobile browsers\n  el.addEventListener('keyup', (ev) => {\n    if (ev.keyCode === 229 || !ev.keyCode) {\n      // look for a space before whatever was entered.\n      const v = el.value.substr(el.selectionStart - 1, 1);\n      if (v === ' ' && el.dataset.prefix) {\n        el.dispatchEvent(new CustomEvent('request', {detail: el.dataset.prefix}));\n      }\n    }\n  });\n\n  // dedup re-rendering calls\n  (function() {\n    let frame;\n    const dedupRenderLine = () => {\n      if (!frame) {\n        frame = window.requestAnimationFrame(() => {\n          frame = null;\n          renderLine();\n        });\n      }\n    };\n    window.addEventListener('resize', dedupRenderLine);\n    el.addEventListener('wheel', dedupRenderLine, {passive: true});\n  }());\n\n  // replace helper\n  const replaceFocus = (call) => {\n    const previousScrollLeft = el.scrollLeft;\n    const [from, to] = [+el.dataset.from, +el.dataset.to];\n    const value = el.value.substr(from, to - from);\n    let [start, end] = [typer.selectionStart, typer.selectionEnd];\n\n    const update = call(value);\n    if (update == null) { return false; }\n    typer.value = typer.value.substr(0, from) + update + typer.value.substr(to);\n\n    const drift = (where) => {\n      if (where >= to) {\n        // after the update\n        where = where - (to - from) + update.length;\n      } else if (where > from) {\n        // during the update\n        where = from + update.length;\n      } else {\n        // do nothing, was before\n      }\n      return where;\n    };\n\n    typer.focus();\n    typer.dispatchEvent(new CustomEvent('change'));  // nb. updates from/to (from won't change)\n    // pretend we were like this all along\n    [state.start, state.end] = [typer.selectionStart, typer.selectionEnd] = [drift(start), drift(end)];\n\n    permitNextChange = true;\n    el.scrollLeft = previousScrollLeft;  // before setRange, so the underline is correct\n    setRange(from, from + update.length);\n    return true;\n  };\n\n  // handle 'modifier' event: apply modifiers to the focus word, if any\n  el.addEventListener('modifier', (ev) => {\n    const arg = {[ev.detail.type]: ev.detail.code};\n    replaceFocus((value) => modifier.modify(value, arg).out || '');\n  });\n\n  // handle 'emoji' event: if there's a current focus word, then replace it with the new emoji \\o/\n  el.addEventListener('emoji', (ev) => {\n    const emoji = ev.detail.choice;\n    if (!replaceFocus(() => emoji)) { return; }\n\n    // listen to the caller's view on what word we should pretend this emoji is\n    el.dataset['word'] = ev.detail.word || '';\n    datasetSafeDelete(el, 'prefix');\n  });\n}\n\nupgrade(typer);\n","\nexport default function build(raw, prefixLength=3, maxSuggestions=10) {\n  const prefixSuggest = {};\n\n  const values = {};\n  raw.forEach(data => {\n    const k = data[0];\n    values[k] = data.slice(1);\n\n    const prefix = k.substr(0, prefixLength);\n    for (let i = 1; i <= prefix.length; ++i) {\n      const part = prefix.substr(0, i);\n      let opts = prefixSuggest[part];\n      if (!opts) {\n        opts = prefixSuggest[part] = [];\n      }\n      if (opts.length < maxSuggestions) {\n        opts.push(k);\n      }\n    }\n  });\n\n  return function(typed, prefix) {\n    typed = typed.toLowerCase();\n    const rest = typed.substr(prefixLength);\n    let all = prefixSuggest[typed.substr(0, prefixLength)] || [];\n\n    if (rest) {\n      all = all.filter(word => word.substr(prefixLength).startsWith(rest));\n    }\n    if (!prefix) {\n      all = all.filter(word => word === typed);\n    }\n    all = all.map(word => [word, ...values[word]]);\n\n    return all.length ? all : [];\n  }\n}\n","\nconst resolved = Promise.resolve();\n\n/**\n * Returns a Promise that resolves on `requestIdleCallback`.\n *\n * @return {!Promise<!IdleDeadline>}\n */\nexport function idle() {\n  return new Promise((resolve) => window.requestIdleCallback(resolve));\n}\n\n/**\n * Returns a Promise that resolves on `requestAnimationFrame`.\n *\n * @param {number=} delay whether to also delay by `setTimeout`\n * @return {!Promise<!IdleDeadline>}\n */\nexport function rAF(delay=undefined) {\n  if (delay !== undefined) {\n    return new Promise((resolve) => {\n      window.setTimeout(() => window.requestAnimationFrame(resolve), delay);\n    });\n  }\n  return new Promise((resolve) => window.requestAnimationFrame(resolve));\n}\n\n/**\n * Returns a Promise that resolves after a microtask.\n *\n * @return {!Promise<void>}\n */\nexport function microTask() {\n  let resolver;\n  const out = new Promise((resolve) => resolver = resolve);\n  resolved.then(() => resolver());  // microTask\n  return out;\n}\n\n/**\n * @return {{promise: !Promise<void>, resolver: function(): void}}\n */\nexport function resolver() {\n  let resolver;\n  const promise = new Promise((resolve) => resolver = resolve);\n  return {resolver, promise};\n}\n\nconst debouceMap = new Map();\n\n/**\n * Returns a Promise that debounces a call to the passed callable.\n *\n * @template T\n * @param {function(): T} callable\n * @param {number=} delay\n * @return {!Promise<T>}\n */\nexport function debounce(callable, delay=0) {\n  let state = debouceMap.get(callable);\n  if (!state) {\n    state = {c: callable};\n    const p = new Promise((resolve) => state.r = resolve);\n    state.p = p.then(() => {\n      debouceMap.delete(callable);\n      return state.c();\n    });\n    debouceMap.set(callable, state);\n  }\n\n  window.clearTimeout(state.t);\n  state.t = window.setTimeout(state.r, Math.max(0, delay));\n\n  return state.p;\n}","\n/**\n * Remove duplicate entries from the passed array, only from the 1th index.\n *\n * @param {!Array<string>}\n * @return {!Array<string>}\n */\nfunction removeDuplicates(row) {\n  const found = new Set();\n  return row.filter((item, i) => {\n    if (i !== 0) {\n      if (found.has(item)) { return false; }\n      found.add(item);\n    }\n    return true;\n  });\n}\n\n/**\n * Merge the given results arrays. These will both be in the form of:\n *   [[name, emoji1, emoji2,....], ...]\n *\n * The first argument will be updated with the data from the second argument.\n *\n * @param {!Array<!Array<string>>} existing\n * @param {!Array<!Array<string>>} update\n */\nexport function merge(existing, update) {\n  const lookup = {};\n  existing.forEach((row, i) => lookup[row[0]] = i);\n\n  update.forEach((row) => {\n    const index = lookup[row[0]];\n    if (index === undefined) {\n      lookup[row[0]] = existing.length;  // in case there's dup data\n      existing.push(row);\n      return;\n    }\n\n    // otherwise, just append all new data and place back into array\n    const existingRow = existing[index];\n    const updatedData = row.slice(1);\n    existing[index] = removeDuplicates(existingRow.concat(updatedData));\n  });\n}","const api = 'https://emojityper.appspot.com';\nconst recentLimit = 8;\nconst selectionDelay = 5 * 1000;\n\nimport build from './prefixgen.js';\nimport * as promises from './promises.js';\nimport * as results from './results.js';\n\n/**\n * Returns the local prefix search tool.\n *\n * @return {function(string, boolean): !Array<!Array<string>>}\n */\nconst getPrefixGen = (function() {\n  let localPromise = null;  // results from localStorage\n  const raw = window.localStorage['popular'];\n  if (raw) {\n    let out;\n    try {\n      out = JSON.parse(raw);\n    } catch (e) {\n      console.debug('couldn\\'t parse localStorage popular', e);\n      out = null;\n    }\n    if (out) {\n      localPromise = Promise.resolve(build(out['results']));\n      if (out['created'] >= (+new Date - 60 * 60 * 24 * 1000)) {\n        // return immediately, it's less than one day old\n        return () => localPromise;\n      }\n    }\n  }\n\n  // we don't have data or it's >1day old, refetch\n  const f = new Promise((resolve, reject) => {\n    const xhr = new XMLHttpRequest();\n    xhr.open('GET', api + '/popular');\n    xhr.onerror = reject;\n    xhr.responseType = 'json';\n    xhr.onload = () => resolve(xhr.response);\n    xhr.send();\n  }).then(raw => {\n    // IE11 doesn't respect responseType, and we always return an Object\n    return typeof raw === 'string' ? JSON.parse(raw) : raw;\n  });\n\n  f.then(data => {\n    // TODO: It's a bit ugly to hit the loader from here.\n    window.loader.hidden = true;\n    data['created'] = +new Date();\n    window.localStorage['popular'] = JSON.stringify(data);\n  });\n\n  const remotePromise = f.then(v => build(v['results']));\n  if (!localPromise) {\n    // TODO: It's a bit ugly to hit the loader from here.\n    window.loader.hidden = false;\n    return () => remotePromise;  // wait for data\n  }\n\n  // return localPromise until remotePromise is done\n  let promiseToReturn = localPromise;\n  remotePromise.then(() => promiseToReturn = remotePromise);\n  return () => promiseToReturn;\n}());\n\n/**\n * Requests emoji completion.\n *\n * @param {string} text user has typed\n * @param {boolean} prefix is this a prefix search, or is it a definite whole word?\n * @param {boolean=} more whether to return lots more results for this query\n * @return {!Promise<!Array<!Array>>}\n */\nexport function request(text, prefix, more=false) {\n  if (!text) {\n    if (more && text === '') {\n      const r = recent();\n      r.unshift('^recent');\n      const p = ['^popular']; // TODO: include popular emoji\n      return Promise.resolve([r, p]);\n    }\n\n    return Promise.resolve([]);\n  }\n\n  const localPromise = getPrefixGen().then(suggest => suggest(text, prefix));\n  if (!more) {\n    return localPromise;\n  }\n\n  // TODO: At some point, the 'more' data should go into a local cache. For now, just fetch.\n  let url = `${api}/query?query=${window.encodeURIComponent(text)}`;\n  if (prefix) {\n    url += '&prefix=true';\n  }\n  const morePromise = window.fetch(url).then(out => out.json()).then(out => out['results']);\n  return Promise.all([localPromise, morePromise]).then(both => {\n    const [local, more] = both;\n    results.merge(local, more);\n    return local;\n  });\n}\n\n/**\n * Records use of name/emoji pairs.\n *\n * @param {string} name used to select emoji\n * @param {string} emoji selected\n * @param {!Promise<!Response>} eventual response after delay\n */\nexport const select = (function() {\n  let pending = {};\n\n  const runner = () => {\n    const body = JSON.stringify(pending);\n    pending = {};  // clear pending for next time\n    return navigator.sendBeacon(api + '/select', body);\n  };\n\n  return function select(name, emoji) {\n    if (name[0] === '^') {\n      return;  // do nothing\n    }\n\n    const r = recent();\n    const index = r.indexOf(emoji);\n    if (index !== -1) {\n      r.splice(index, 1);\n    }\n    r.unshift(emoji);\n    r.splice(recentLimit);\n    window.localStorage['recent'] = r.join(',');\n    // TODO: do something with recent emoji use\n\n    pending[name] = emoji;\n    return promises.debounce(runner, selectionDelay);\n  }\n}());\n\n/**\n * Submit the name of an emoji.\n *\n * @param {string} name\n * @param {string} emoji\n * @return {!Promise<Response>}\n */\nexport function submit(name, emoji) {\n  const body = new FormData();\n  body.append('name', name);\n  body.append('emoji', emoji);\n  return window.fetch(api + '/name', {method: 'POST', mode: 'cors', body});\n}\n\n/**\n * Gets recently used emoji.\n *\n * @return {!Array<string>}\n */\nexport function recent() {\n  return (window.localStorage['recent'] || '').split(',').filter((x) => x);\n}","\n/**\n * @fileoverview The validator runs constantly and validates emoji rendering.\n */\n\nimport {isExpectedLength} from './modifier.js';\nimport Worker from './worker.js';\n\nconst prefix = '-ok_';\nconst ls = window.localStorage;\nconst known = new Map();\n\nfunction runner(emoji) {\n  const key = prefix + emoji;\n  if (ls[key]) {\n    return true;\n  }\n\n  const out = isExpectedLength(emoji);\n  known.set(emoji, out);\n  if (out) {\n    ls[key] = 't';  // use dummy small string\n  }\n  return out;\n}\n\nconst worker = new Worker(runner);\n\n/**\n * As per isExpectedLength, but caches successful results.\n *\n * @param {string} string to check\n * @return {!Promise<boolean>} whether this is probably an emoji\n */\nexport async function valid(emoji) {\n  const immediate = known.get(emoji);\n  if (immediate !== undefined) {\n    return immediate;\n  }\n  return worker.task(emoji);\n}\n","\nconst arrowKeys = ['Left', 'Right', 'Up', 'Down'];\n\n/**\n * @param {!Event} event\n * @return {?string} one of \"Arrow{Left,Right,Up,Down}\" if this is a keyboard event of that arrow\n */\nexport function arrowFromEvent(ev) {\n  if (!ev.key) {\n    return null;\n  }\n  if (ev.key.startsWith('Arrow')) {\n    return ev.key;\n  }\n  if (arrowKeys.indexOf(ev.key) === -1) {\n    return null;\n  }\n  return 'Arrow' + ev.key;\n}\n","\n/**\n * @fileoverview Controls the size and `has-value` class of the body itself based on current input.\n */\n\nconst value = (ev) => {\n  const text = ev.detail.trim();\n  document.body.classList.toggle('has-value', Boolean(text));\n};\ntyper.addEventListener('value', value);\nvalue({detail: typer.value});\n\n// set minHeight to actual viewport height, but allow for keyboard etc\nconst resize = (ev) => {\n  const height = window.innerHeight;\n  document.body.style.minHeight = `${height}px`;\n};\nwindow.addEventListener('resize', resize);\nwindow.addEventListener('load', resize);\nresize();\n\n\nlet deferredPrompt = null;\n\nfunction cleanupPrompt() {\n  document.body.classList.remove('has-install');\n  deferredPrompt = null;\n}\n\nwindow.addEventListener('beforeinstallprompt', (ev) => {\n  ga('send', 'event', 'install', 'available');\n  document.body.classList.add('has-install');\n  deferredPrompt = ev;\n  ev.preventDefault();\n  return false;\n});\n\nwindow.addEventListener('appinstalled', (ev) => {\n  ga('send', 'event', 'install', 'installed');\n  cleanupPrompt();\n});\n\nconst installEl = document.getElementById('install');\ninstallEl.addEventListener('click', (ev) => {\n  if (!deferredPrompt) {\n    return;\n  }\n  deferredPrompt.prompt();\n\n  if (!deferredPrompt.userChoice) {\n    return;  // older Chrome\n  }\n\n  deferredPrompt.userChoice.then((result) => {\n    ga('send', 'event', 'install', result);\n    // TODO: should we listen to appinstalled? I suppose we don't know what the user said.\n  }).catch((err) => {\n    console.warn('beforeinstallprompt prompt', err);\n  }).then(cleanupPrompt);\n});\n","\n/**\n * @fileoverview Rotates through various advertisements in Emojityper.\n */\n\nconst adverts = document.getElementById('adverts');\n\nfunction refresh() {\n  const active = adverts.querySelector('.active');\n  const next = (active && active.nextElementSibling || adverts.firstElementChild);\n  if (!next) {\n    console.warn('no adverts to choose from');\n    return;\n  }\n\n  active && active.classList.remove('active');\n  next.classList.add('active');\n\n  enqueue();\n}\n\nlet timeout;\nfunction enqueue() {\n  window.clearTimeout(timeout);\n  timeout = window.setTimeout(() => {\n    window.requestAnimationFrame(refresh);\n  }, 10 * 1000);\n}\n\nenqueue();\n","\n/**\n * @fileoverview Polyfills needed for modern browsers, even those supporting ES6 modules.\n */\n\nif (!window.requestIdleCallback) {\n  // TODO: this is a pretty terrible requestIdleCallback\n  window.requestIdleCallback = (callback) => {\n    const start = performance.now();\n    const fn = callback.bind(null, {\n      didTimeout: false,\n      timeRemaining: () => Math.max(0, 50 - (performance.now() - start)),\n    });\n    return window.setTimeout(fn, 1);\n  };\n\n  window.cancelIdleCallback = id => window.clearTimeout(id);\n}\n\nif (!navigator.sendBeacon) {\n  navigator.sendBeacon = function(url, body) {\n    return new Promise((resolve, reject) => {\n      const xhr = new XMLHttpRequest();\n      xhr.open('POST', url, true);\n      xhr.onerror = reject;\n      xhr.onload = resolve;\n      xhr.send(body);\n    });\n  };\n}\n","\n/**\n * @fileoverview Handles the buttons in the top-right of the page (currently just Copy).\n */\n\nconst all = Array.prototype.slice.call(buttons.querySelectorAll('button'));\n\nconst handler = ev => {\n  const text = ev.detail.trim();\n  const hasValue = Boolean(text);\n  all.forEach(button => button.disabled = !hasValue);\n};\ntyper.addEventListener('value', handler);\nhandler({detail: typer.value});\n\n// copy handler\n(function(button, input) {\n  let timeout;\n  const defaultText = button.textContent;\n  const spaceRe = /\\s*/;\n\n  const copy = _ => {\n    const [start, end] = [input.selectionStart, input.selectionEnd];\n\n    // find start/end of content (trim, but find positions)\n    let left = 0;\n    let right = input.value.length;\n    if (input.selectionStart !== input.selectionEnd) {\n      left = input.selectionStart;\n      right = input.selectionEnd;\n    }\n    left += spaceRe.exec(input.value.substr(left))[0].length;\n    right = left + input.value.substr(left, right - left).trim().length;\n    if (right <= left) { return false; }\n\n    input.focus();\n    input.selectionStart = left;\n    input.selectionEnd = right;\n\n    let ok = false;\n    try {\n      ok = document.execCommand('copy');\n    } catch(e) {\n      console.warn('could not copy', e);\n      ok = false;\n    }\n    // restore previous selection\n    [input.selectionStart, input.selectionEnd] = [start, end];\n\n    if (!ok) { return true; }\n    console.info('copied', input.value.substr(left, right));\n\n    // analytics\n    ga('send', 'event', 'text', 'copy');\n\n    // show message\n    button.textContent = button.dataset.copied;\n    window.clearTimeout(timeout);\n    timeout = window.setTimeout(ev => {\n      button.textContent = defaultText;\n    }, 500);\n  };\n\n  input.addEventListener('keydown', ev => {\n    if (ev.key == 'Enter') {\n      button.click();\n      input.focus();\n    }\n  });\n  button.addEventListener('click', ev => {\n    copy();\n    button.focus();\n  });\n}(copy, typer));\n\n","\n/**\n * @fileoverview Async worker.\n */\n\nimport * as promises from './promises.js';\n\nconst allowedWorkTime = 4;\nconst maximumTaskFrame = 100;\n\nexport default class Worker {\n  constructor(fn) {\n    this.fn_ = fn;\n    this.queue_ = [];\n    this.waiting_ = null;\n\n    this.runner_().catch((err) => {\n      console.info('worker runner failed', err);\n      throw err;\n    });\n  }\n\n  async runner_() {\n    await new Promise((resolve) => this.waiting_ = resolve);\n    this.waiting_ = null;\n    await promises.idle();\n\n    for (;;) {\n      if (this.chunk_()) {\n        return this.runner_();\n      }\n      await promises.rAF();\n    }\n  }\n\n  /**\n   * Completes a chunk of work.\n   *\n   * @return {boolean} Whether work is done.\n   */\n  chunk_() {\n    const start = window.performance.now();\n\n    let done = 0;\n    while (this.queue_.length) {\n      const next = this.queue_.shift();\n      next.resolve(this.fn_(next.arg));\n      ++done;\n\n      if (done == maximumTaskFrame || window.performance.now() - start > allowedWorkTime) {\n        break;\n      }\n    }\n\n    return !this.queue_.length;\n  }\n\n  task(arg) {\n    return new Promise((resolve) => {\n      this.queue_.push({resolve, arg});\n      this.waiting_ && this.waiting_();\n    });\n  }\n}\n","\n/**\n * @fileoverview Emojityper's suggestion handler. Handles creation, showing etc of autocomplete\n * buttons in the UI.\n */\n\nimport * as provider from './lib/provider.js';\nimport * as modifier from './lib/modifier.js';\nimport {valid} from './lib/valid.js';\nimport * as promises from './lib/promises.js';\nimport * as eventlib from './lib/event.js';\n\n/**\n * ButtonManager helps create and show emoji buttons in the UI.\n */\nclass ButtonManager {\n  constructor(holder) {\n    this.holder_ = holder;\n    this.pendingFirstEmoji_ = null;\n\n    /** @type {!Map<string, !HTMLElement>} */\n    this.options_ = new Map();\n\n    /** @type {!Map<string, !HTMLButtonElement>} */\n    this.buttons_ = new Map();\n\n    /** @type {!WeakMap<!HTMLButtonElement, !DocumentFragment>} */\n    this.buttonTarget_ = new WeakMap();\n\n    /** @type {function(this:ButtonManager, !Object): void} */\n    this.setModifier = (() => {\n      const genderOption = ButtonManager.optionType_('modifier', 'gender');\n      const toneOption = ButtonManager.optionType_('modifier', 'tone');\n      this.holder_.appendChild(genderOption);\n      this.holder_.appendChild(toneOption);\n\n      // helper to create buttons\n      const createModifierButton = (text, value=null) => {\n        const button = document.createElement('button');\n        button.textContent = text;\n        button.dataset['value'] = value;\n        return button;\n      };\n\n      // create gender options\n      const genders = [\n        createModifierButton('\\u{2014}', ''),\n        createModifierButton('\\u{2640}', 'f'),\n        createModifierButton('\\u{2640}\\u{2642}', 'fm'),\n        createModifierButton('\\u{2642}', 'm'),\n        createModifierButton('\\u{2642}\\u{2640}', 'mf'),\n      ];\n\n      // create tone options\n      const tones = [\n        toneOption.appendChild(createModifierButton('\\u{2014}', '')),\n      ];\n      for (let i = 0x1f3fb; i <= 0x1f3ff; ++i) {\n        tones.push(createModifierButton(String.fromCodePoint(i), i));\n      }\n\n      // helper to add/remove\n      const updateStatus = (yes, node, owner) => {\n        yes ? owner.appendChild(node) : node.remove();\n      };\n      return function(info) {\n        genders.forEach(node => {\n          const l = node.dataset['value'].length;\n          const yes = (!l && info.gender.neutral)\n              || (l === 1 && info.gender.single)\n              || (l === 2 && info.gender.double);\n          updateStatus(yes, node, genderOption);\n        });\n        tones.forEach(node => updateStatus(info.tone, node, toneOption));\n\n        // kick the elements: Safari needs this otherwise sometimes they remain hidden (!)\n        this.holder_.insertBefore(genderOption, genderOption.nextSibling);\n        this.holder_.insertBefore(toneOption, toneOption.nextSibling);\n      }\n    })();\n  }\n\n  static optionType_(type, value) {\n    const node = document.createElement('div');\n    node.className = 'options ' + type;\n    node.dataset[type] = value;\n    node.dataset['name'] = value;\n    return node;\n  }\n\n  optionForName_(name) {\n    const prev = this.options_.get(name);\n    if (prev) {\n      return prev;\n    }\n    const node = document.createElement('div');\n    node.className = 'options';\n    node.setAttribute('data-option', name);\n\n    if (name[0] === '^') {\n      node.classList.add('special');\n      name = name.substr(1);\n    }\n    node.setAttribute('data-name', name);  // presentation only\n    return node;\n  }\n\n  /**\n   * Creates a `button` with the textContent of the passed emoji. Starts removed from the page,\n   * but will (when valid) be placed in-order inside the specified `option`.\n   *\n   * @param {!HTMLElement} option to place inside\n   * @param {string} emoji\n   * @return {!HTMLButtonElement}\n   */\n  addEmojiTo_(option, emoji) {\n    let button = this.buttons_.get(emoji);\n    if (button) {\n      // if the button was known, check buttonTarget_: either it's the eventual placement, which\n      // we must replace, or it's a known good/bad already\n      const target = this.buttonTarget_.get(button);\n      if (target === null) {\n        return button;  // known invalid\n      } else if (target === undefined) {\n        option.appendChild(button);  // known good\n        return button;\n      }\n    } else {\n      button = document.createElement('button');\n      button.textContent = emoji;\n      this.buttons_.set(emoji, button);\n\n      valid(emoji).then((isValid) => {\n        if (!isValid) {\n          return this.buttonTarget_.set(button, null);\n        }\n\n        const node = this.buttonTarget_.get(button);\n        node.parentNode.replaceChild(button, node);\n        this.buttonTarget_.delete(button);\n\n        // TODO(samthor): call this less?\n        this.pendingFirstEmoji_ && this.pendingFirstEmoji_();\n      });\n    }\n\n    const node = document.createTextNode('');  // empty placeholder to replace\n    this.buttonTarget_.set(button, node);\n    option.appendChild(node);\n\n    return button;\n  }\n\n  /**\n   * Returns any current valid emoji for the passed option name.\n   *\n   * @param {string} name\n   * @return {?string} emoji\n   */\n  immediateFirstEmojiForOption_(name) {\n    const node = this.options_.get(name);\n    const cand = node && node.firstElementChild;\n    return cand ? cand.textContent : null;\n  }\n\n  /**\n   * Returns a promise for the first valid emoji value for the given name. This allows a user to\n   * keep typing(-ish) yet have their text replaced with emoji.\n   *\n   * This promise isn't guaranteed to resolve. Drops previous request on additional calls.\n   *\n   * @param {string} name to search for\n   * @return {!Promise<?string>} emoji found\n   */\n  firstEmojiForOption(name) {\n    return new Promise((resolve) => {\n      const checker = () => {\n        const immediateResult = this.immediateFirstEmojiForOption_(name);\n        if (!immediateResult) {\n          return false;\n        }\n        if (this.pendingFirstEmoji_ === checker) {\n          this.pendingFirstEmoji_ = null;\n        }\n        resolve(immediateResult);\n      };\n      this.pendingFirstEmoji_ = checker;\n      checker();\n    });\n  }\n\n  /**\n   * Updated displayed options with real results. These are expected the API format:\n   *    [[name,emoji,emoji,...],[name,emoji,...],...]\n   *\n   * This retains existing options if they are included in the named results.\n   *\n   * @param {!Array<!Array<string>>}\n   */\n  update(results) {\n    const options = new Map();\n    const buttons = new Map();\n    const previousActiveElement =\n        this.holder_.contains(document.activeElement) ? document.activeElement : null;\n\n    results.forEach((result) => {\n      const name = result[0];\n\n      const option = this.optionForName_(name);\n      options.set(name, option);\n      this.options_.delete(name);\n      this.holder_.appendChild(option);  // reinsert in better order\n\n      for (let i = 1, emoji; emoji = result[i]; ++i) {\n        if (buttons.has(emoji)) {\n          continue;  // already stolen by something above us\n        }\n        // TODO: this.addEmojiTo_ also uses this.buttons_\n        buttons.set(emoji, this.addEmojiTo_(option, emoji));\n      }\n    });\n\n    this.options_.forEach((option) => option.remove());\n    this.options_ = options;\n    this.buttons_ = buttons;\n\n    if (previousActiveElement) {\n      if (document.body.contains(previousActiveElement)) {\n        previousActiveElement.focus();\n      } else {\n        typer.focus();  // restore to main input\n      }\n    }\n  }\n}\n\n// key overrides to recognize spacebar causing 'click'\nlet spaceFrame = 0;\nchooser.addEventListener('keyup', ev => {\n  if (ev.key !== ' ' || ev.target.localName !== 'button') { return; }\n  spaceFrame = window.setTimeout(() => spaceFrame = 0, 0);\n});\n\n// button click handler\nchooser.addEventListener('click', ev => {\n  let label = undefined;\n  const b = ev.target;\n  if (b.localName !== 'button') {\n    // ignore\n  } else if (b.parentNode.dataset['modifier']) {\n    const value = 'value' in b.dataset ? (+b.dataset['value'] || b.dataset['value']) : null;\n    const detail = {type: b.parentNode.dataset['modifier'], code: value};\n    typer.dispatchEvent(new CustomEvent('modifier', {detail}));\n    label = 'modifier';\n  } else if (b.parentNode.dataset['option']) {\n    // nb. we typically clear the word on choice (as it confuses @nickyringland), but if you hit\n    // space or ctrl-click the button, keep it around.\n    const retainWord = (spaceFrame !== 0 || ev.metaKey || ev.ctrlKey);\n    const word = retainWord ? b.parentNode.dataset['option'] : null;\n\n    const detail = {choice: b.textContent, word};\n    typer.dispatchEvent(new CustomEvent('emoji', {detail}));\n    provider.select(b.parentNode.dataset['option'], detail.choice);\n    label = 'emoji';\n  } else {\n    // unknown\n  }\n  label && ga('send', 'event', 'options', 'click', label);\n});\n\n// handle moving down from input\ntyper.addEventListener('keydown', ev => {\n  if (ev.key === 'ArrowDown' || ev.key === 'Down') {\n    const first = chooser.querySelector('button');\n    if (first) {\n      first.focus();\n      ga('send', 'event', 'options', 'keyboardnav');\n    }\n  }\n});\n\n// handle keyboard navigation inside chooser\nchooser.addEventListener('keydown', ev => {\n  switch (ev.key) {\n  case 'Escape':\n    typer.focus();\n    break;\n  }\n  const arrow = eventlib.arrowFromEvent(ev);\n  if (!arrow) { return; }\n\n  if (!document.activeElement || !chooser.contains(document.activeElement)) { return; }\n\n  // TODO: memoize value\n  const buttonArray = Array.from(chooser.querySelectorAll('button'));\n  const index = buttonArray.indexOf(document.activeElement);\n  if (index === -1) { return; }\n\n  // handle l/r keys\n  let delta;\n  if (arrow === 'ArrowLeft') {\n    delta = -1;\n  } else if (arrow === 'ArrowRight') {\n    delta = +1;\n  }\n  if (delta) {\n    const target = index + delta;\n    if (target >= 0 && target < buttonArray.length) {\n      buttonArray[target].focus();\n    }\n    return;  // done\n  }\n\n  // handle u/d keys\n  if (arrow === 'ArrowUp') {\n    delta = -1;\n  } else if (arrow === 'ArrowDown') {\n    delta = +1;\n  } else {\n    return;\n  }\n  const previousRect = document.activeElement.getBoundingClientRect();\n  const best = {dist: Infinity, button: null};\n\n  let targetTop = undefined;\n  let candidate = index;\n  while ((candidate += delta) >= 0 && candidate < buttonArray.length) {\n    const button = buttonArray[candidate];\n    const candidateRect = button.getBoundingClientRect();\n\n    if (previousRect.top === candidateRect.top) { continue; }\n    if (targetTop === undefined) {\n      targetTop = candidateRect.top;\n    }\n    if (candidateRect.top !== targetTop) {\n      break;  // no more good candidates\n    }\n\n    const dist = Math.abs(candidateRect.left - previousRect.left);\n    if (dist < best.dist) {\n      [best.dist, best.button] = [dist, button];\n    }\n  }\n\n  if (best.button) {\n    best.button.focus();\n  } else if (targetTop === undefined && delta < 0) {\n    // if we were at top and going -ve, then return to input\n    typer.focus();\n  }\n});\n\n(function() {\n  const longTime = 2000;\n  const delayTime = 250;\n  const manager = new ButtonManager(chooser);\n\n  let previous = {};\n  let previousQueryAt = performance.now();\n  let pendingFirstEmojiRequest = null;\n\n  // handler for a prefix search\n  typer.addEventListener('query', (ev) => {\n    // immediately inform manager of modifier buttons (gender, tone), if it's a full word search\n    const info = modifier.modify(!ev.detail.prefix && ev.detail.focus || '');\n    manager.setModifier(info);\n\n    pendingFirstEmojiRequest = null;  // user typed something else\n\n    let immediate = false;\n    const now = performance.now();\n    const query = ev.detail;\n    if (!previous.text || previous.prefix !== query.prefix) {\n      immediate = true;  // type changed, user expects snappiness\n    } else if (now - previousQueryAt > longTime) {\n      immediate = true;  // it's been a while\n    }\n    previous = query;\n    previousQueryAt = now;\n\n    const request = async (timeout=0, more=false) => {\n      if (timeout) {\n        await promises.rAF(timeout);\n        if (previous !== query) { return -1; }\n      }\n      const results = await provider.request(query.text, query.prefix, more);\n      if (previous !== query) { return -1; }\n\n      // TODO: rather than discarding, can we work out whether this is something we can _filter_\n      // to _look_ like the real results?\n      // nb. we'd have to say... this is \"old\" but the final one hasn't finished.\n\n      return manager.update(results);\n    };\n\n    const p = request(immediate ? 0 : delayTime).then((valid) => {\n      if (valid < 0) { return -2; }  // query changed\n\n      // TODO: the 'more' behaviour interacts oddly with pendingFirstEmojiRequest, as it can appear\n      // as if your emoji changes after a _long_ time.\n\n      if (!query.text) {\n        // TODO: delay empty data by a decent time\n        return request(1500, true);\n      }\n\n      const timeout = Math.max(1000, 100 * Math.pow(valid, 0.75));\n      return request(timeout, true);\n    }).catch(err => {\n      console.error('error doing request', err);\n    });\n  });\n\n  // nb. this punctuation list is just misc stuff needed by emojimap\n  const invalidLetterRe = /[^\\w:\\.,$%^\\-']+/g;\n  const simplifyWord = (word) => word.replace(invalidLetterRe, '').toLowerCase();\n\n  // request an autocomplete, the user has just kept typing\n  typer.addEventListener('request', (ev) => {\n    const word = simplifyWord(ev.detail || '');\n    const request = manager.firstEmojiForOption(word);\n    pendingFirstEmojiRequest = request;\n    request.then(choice => {\n      if (pendingFirstEmojiRequest !== request) { return; }\n\n      ga('send', 'event', 'options', 'typing');\n      const detail = {choice, word};\n      typer.dispatchEvent(new CustomEvent('emoji', {detail}));\n    });\n  });\n}());\n","\nimport * as provider from './lib/provider.js';\n\n// advanced handler\n(function(input, advanced) {\n  const form = advanced.querySelector('form');\n  const namer = form.querySelector('input');\n  const button = form.querySelector('button');\n\n  let value = '';\n  let pending = null;\n\n  input.addEventListener('query', (ev) => {\n    const query = ev.detail;\n    const selection = (query.text === null && query.focus !== undefined && query.selection);\n    value = query.focus;\n    if (!selection) {\n      if (!pending) {\n        namer.value = '';  // clear on done if not pending\n        advanced.hidden = true;\n      }\n      return false;\n    }\n    // TODO: round trip to confirm validity of emoji?\n    advanced.hidden = false;\n  });\n\n  const handler = ev => {\n    button.disabled = !namer.value;\n  };\n  'input change'.split(/\\s+/).forEach(type => namer.addEventListener(type, handler));\n\n  form.addEventListener('submit', (ev) => {\n    ev.preventDefault();\n    if (pending) {\n      return false;  // can't submit while running\n    }\n\n    form.classList.add('pending');\n    namer.disabled = true;\n    button.disabled = true;\n\n    const cleanup = _ => {\n      form.classList.remove('pending');\n      namer.disabled = false;\n      namer.value = '';\n      namer.dispatchEvent(new CustomEvent('change'));\n\n      pending = null;\n      if (!value) {\n        advanced.hidden = true;\n      }\n    };\n\n    pending = provider.submit(namer.value, value).then((response) => {\n      if (!response.ok) {\n        throw new Error(response.status);\n      }\n      button.classList.add('success');\n      return false;\n    }).catch(err => {\n      button.classList.add('failure');\n      console.warn('failed to submit emoji', err);\n      return true;\n    }).then(cleanup);\n\n    pending.then(_ => new Promise((resolve, reject) => window.setTimeout(resolve, 2000))).then(_ => {\n      button.className = '';\n    });\n  });\n}(typer, advanced));\n","\nif (navigator.serviceWorker) {\n  navigator.serviceWorker.register('./sw.js').catch((err) => {\n    console.warn('failed to register SW', err);\n  });\n\n  navigator.serviceWorker.addEventListener('controllerchange', () => {\n    console.info('got SW controllerchange, reload');\n    window.location.reload();\n  });\n}\n"]}